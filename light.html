<!DOCTYPE html>
<html lang="zh-TW">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>Light Sculptor | EDEN LAB</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/three.js/r128/three.min.js"></script>
    <link href="https://fonts.googleapis.com/css2?family=Cinzel:wght@400;600&family=Space+Mono:ital,wght@0,400;0,700;1,400&family=Shippori+Mincho:wght@400;500;700&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">

    <script>
        tailwind.config = {
            theme: {
                extend: {
                    colors: { eden: { gold: '#D4AF37', black: '#050505' } },
                    fontFamily: { serif: ['Cinzel', 'serif'], mono: ['Space Mono', 'monospace'], zh: ['Shippori Mincho', 'serif'] }
                }
            }
        }
    </script>

    <style>
        /* --- Ê†∏ÂøÉ‰ΩàÂ±ÄÔºöÁÑ°Êç≤Âãï --- */
        body { 
            background-color: #050505; color: #C0C0C0; 
            height: 100vh; height: 100dvh; 
            width: 100vw; overflow: hidden;
            display: flex; flex-direction: column;
        }

        /* 1. Header (ÂìÅÁâåËàá IG) */
        header { 
            height: 50px; flex-shrink: 0; z-index: 20;
            display: flex; justify-content: space-between; align-items: center;
            padding: 0 20px; border-bottom: 1px solid #1a1a1a; background: #050505;
        }
        .ig-link {
            font-family: 'Space Mono'; font-size: 10px; color: #888; letter-spacing: 0.1em;
            display: flex; align-items: center; gap: 6px; transition: 0.3s;
            text-decoration: none; border: 1px solid #333; padding: 4px 10px; border-radius: 20px;
        }
        .ig-link:hover { color: #D4AF37; border-color: #D4AF37; background: rgba(212,175,55,0.1); }

        /* 2. 3D Canvas */
        #canvas-wrapper { 
            flex-grow: 1; position: relative; width: 100%; min-height: 0; 
            background: radial-gradient(circle at center, #1f1f1f 0%, #000000 90%);
        }
        canvas { display: block; width: 100%; height: 100%; outline: none; }

        /* 3. Dashboard (ÊéßÂà∂Âè∞) */
        #dashboard { 
            flex-shrink: 0; z-index: 20; background: #0a0a0a; border-top: 1px solid #222;
            padding: 15px 20px; padding-bottom: max(10px, env(safe-area-inset-bottom));
            display: flex; flex-direction: column; gap: 12px;
        }

        /* Tabs */
        .tabs { display: flex; border: 1px solid #333; border-radius: 2px; overflow: hidden; height: 32px; }
        .tab-btn {
            flex: 1; display: flex; align-items: center; justify-content: center;
            font-family: 'Cinzel', serif; font-size: 10px; letter-spacing: 0.1em; color: #666;
            background: #0e0e0e; cursor: pointer; transition: 0.2s;
        }
        .tab-btn.active { background: #D4AF37; color: #000; font-weight: bold; }

        /* Control Rows */
        .slider-row { display: flex; align-items: center; gap: 12px; height: 24px; }
        .slider-label { font-family: 'Space Mono'; font-size: 9px; color: #555; width: 55px; letter-spacing: 0.05em; }
        .slider-val { font-family: 'Space Mono'; font-size: 9px; color: #D4AF37; width: 30px; text-align: right; }
        
        /* Custom Range Slider */
        input[type=range] { -webkit-appearance: none; flex: 1; background: transparent; cursor: pointer; }
        input[type=range]::-webkit-slider-thumb {
            -webkit-appearance: none; height: 12px; width: 12px; background: #D4AF37; 
            border-radius: 50%; margin-top: -5px; border: 1px solid #000; box-shadow: 0 0 5px rgba(212,175,55,0.5);
        }
        input[type=range]::-webkit-slider-runnable-track { width: 100%; height: 2px; background: #333; border-radius: 1px; }

        /* Power Toggle */
        .status-row { display: flex; justify-content: space-between; align-items: center; height: 20px; margin-bottom: 5px; }
        .toggle { position: relative; display: inline-block; width: 30px; height: 16px; }
        .toggle input { opacity: 0; width: 0; height: 0; }
        .slider-tg { position: absolute; cursor: pointer; top: 0; left: 0; right: 0; bottom: 0; background-color: #333; transition: .3s; border-radius: 16px; border: 1px solid #444; }
        .slider-tg:before { position: absolute; content: ""; height: 10px; width: 10px; left: 2px; bottom: 2px; background-color: #888; transition: .3s; border-radius: 50%; }
        input:checked + .slider-tg { background-color: #111; border-color: #D4AF37; }
        input:checked + .slider-tg:before { transform: translateX(14px); background-color: #D4AF37; }

        /* 4. Gear Section (Affiliate) - Designed like a "Recommended Tool" bar */
        .gear-section {
            border-top: 1px solid #222; margin-top: 5px; pt-3;
            display: flex; gap: 10px;
        }
        .gear-card {
            flex: 1; background: #111; border: 1px solid #222; padding: 8px;
            display: flex; align-items: center; gap: 10px;
            text-decoration: none; transition: 0.3s; border-radius: 4px;
        }
        .gear-card:hover { border-color: #444; background: #151515; }
        .gear-icon { width: 32px; height: 32px; background: #222; color: #666; display: flex; align-items: center; justify-content: center; font-size: 14px; border-radius: 2px; }
        .gear-info h4 { font-family: 'Shippori Mincho', serif; font-size: 10px; color: #ccc; margin-bottom: 2px; }
        .gear-info p { font-family: 'Space Mono', monospace; font-size: 8px; color: #D4AF37; }
        .gear-arrow { color: #444; font-size: 10px; margin-left: auto; }

    </style>
</head>
<body>

    <header>
        <div class="flex items-center gap-2">
            <span class="text-[12px] tracking-[0.2em] text-[#D4AF37] font-serif font-bold">EDEN</span>
            <span class="text-[8px] text-[#444] tracking-widest mt-1">LIGHT SCULPTOR</span>
        </div>
        <a href="https://www.instagram.com/eden_d_photo/" target="_blank" class="ig-link">
            <i class="fab fa-instagram"></i> EDEN_D_PHOTO
        </a>
    </header>

    <div id="canvas-wrapper">
        <canvas id="webgl"></canvas>
    </div>

    <footer id="dashboard">
        
        <div class="tabs">
            <div id="tabKey" class="tab-btn active" onclick="selectLight('key')">KEY</div>
            <div id="tabFill" class="tab-btn" onclick="selectLight('fill')">FILL</div>
            <div id="tabRim" class="tab-btn" onclick="selectLight('rim')">RIM</div>
        </div>

        <div>
            <div class="status-row">
                <span id="targetName" class="font-serif text-[9px] tracking-widest text-[#666]">LIGHT STATUS</span>
                <label class="toggle">
                    <input type="checkbox" id="powerSwitch" checked onchange="toggleLight()">
                    <span class="slider-tg"></span>
                </label>
            </div>

            <div class="flex flex-col gap-2 mt-2">
                <div class="slider-row">
                    <span class="slider-label">AZIMUTH</span>
                    <input type="range" id="azSlider" min="-180" max="180" step="5" oninput="updateVal()">
                    <span id="azDisplay" class="slider-val">45¬∞</span>
                </div>
                <div class="slider-row">
                    <span class="slider-label">ALTITUDE</span>
                    <input type="range" id="polSlider" min="-40" max="90" step="5" oninput="updateVal()">
                    <span id="polDisplay" class="slider-val">30¬∞</span>
                </div>
                <div class="slider-row">
                    <span class="slider-label text-[#D4AF37]">INTENSITY</span>
                    <input type="range" id="intSlider" min="0" max="5" step="0.1" oninput="updateVal()">
                    <span id="intDisplay" class="slider-val text-[#D4AF37]">2.5</span>
                </div>
            </div>
        </div>

        <div class="gear-section">
            <a href="https://s.shopee.tw/1BG8Bdote6" target="_blank" class="gear-card">
                <div class="gear-icon"><i class="fas fa-bullseye"></i></div>
                <div class="gear-info">
                    <h4>Â∞àÊ•≠ÂÖâÂ≠∏ÊùüÂÖâÁ≠í</h4>
                    <p>SHAPING LIGHT</p>
                </div>
                <i class="fas fa-chevron-right gear-arrow"></i>
            </a>
            <a href="https://s.shopee.tw/5fiXXyefqc" target="_blank" class="gear-card">
                <div class="gear-icon"><i class="fas fa-lightbulb"></i></div>
                <div class="gear-info">
                    <h4>ÈõôËâ≤Ê∫´ËÅöÂÖâÁáà</h4>
                    <p>STUDIO ESSENTIAL</p>
                </div>
                <i class="fas fa-chevron-right gear-arrow"></i>
            </a>
        </div>

    </footer>

    <script>
        // --- 1. Three.js Init ---
        const canvas = document.querySelector('#webgl');
        const wrapper = document.querySelector('#canvas-wrapper');
        const scene = new THREE.Scene();
        
        const camera = new THREE.PerspectiveCamera(40, wrapper.clientWidth / wrapper.clientHeight, 0.1, 100);
        camera.position.z = 5.5;

        const renderer = new THREE.WebGLRenderer({ canvas: canvas, antialias: true, alpha: true });
        renderer.setSize(wrapper.clientWidth, wrapper.clientHeight);
        renderer.setPixelRatio(Math.min(window.devicePixelRatio, 2));
        renderer.shadowMap.enabled = true;
        renderer.shadowMap.type = THREE.PCFSoftShadowMap;
        // ‰ΩøÁî®È´òÂ∞çÊØîËâ≤Ë™øÊò†Â∞Ñ
        renderer.toneMapping = THREE.ACESFilmicToneMapping;
        renderer.toneMappingExposure = 1.1;

        // --- 2. Object: Diamond Faceted Sphere ---
        // ÈóúÈçµÔºöIcosahedronGeometry(1.5, 3) Â¢ûÂä†Èù¢Êï∏Ôºå‰ΩÜ‰øùÊåÅ flatShading
        const geometry = new THREE.IcosahedronGeometry(1.5, 3); 
        const material = new THREE.MeshStandardMaterial({ 
            color: 0xffffff, 
            roughness: 0.2, // Êõ¥ÂÖâÊªëÔºåÂÉèÈëΩÁü≥/ÁéªÁíÉÂàáÈù¢
            metalness: 0.1,
            flatShading: true // üíé ÈóúÈçµÔºö‰øùÁïôÂàáÈù¢ÊÑüÔºå‰∏çÂπ≥ÊªëÂåñ
        });
        const mesh = new THREE.Mesh(geometry, material);
        mesh.castShadow = true; 
        mesh.receiveShadow = true;
        scene.add(mesh);

        // Â∫ïÂ∫ß
        const plane = new THREE.Mesh(new THREE.PlaneGeometry(30, 30), new THREE.MeshStandardMaterial({ color: 0x050505, roughness: 1 }));
        plane.rotation.x = -Math.PI / 2;
        plane.position.y = -2;
        plane.receiveShadow = true;
        scene.add(plane);

        // Áí∞Â¢ÉÂÖâ
        const ambientLight = new THREE.AmbientLight(0xffffff, 0.1);
        scene.add(ambientLight);

        // --- 3. Lights System ---
        const lights = {
            key: { 
                obj: createSpot(0xffffff, 2.5), 
                az: 45, pol: 30, on: true, intensity: 2.5, name: "KEY LIGHT" 
            },
            fill: { 
                obj: createSpot(0xffeedd, 0.8), 
                az: -45, pol: 10, on: true, intensity: 0.8, name: "FILL LIGHT" 
            },
            rim: { 
                // ‚ö†Ô∏è 6600K È°èËâ≤ (ÂÜ∑ÁôΩÁï•Â∏∂Ëóç) -> 0xEBF4FF
                obj: createSpot(0xEBF4FF, 3.0), 
                az: 135, pol: 30, on: true, intensity: 3.0, name: "RIM LIGHT" 
            }
        };

        function createSpot(color, intensity) {
            const l = new THREE.SpotLight(color, intensity);
            l.castShadow = true;
            l.shadow.mapSize.width = 1024;
            l.shadow.mapSize.height = 1024;
            l.angle = 0.8;
            l.penumbra = 0.5;
            scene.add(l);
            return l;
        }

        // --- 4. Logic & UI ---
        let currentTarget = 'key';
        
        const azSlider = document.getElementById('azSlider');
        const polSlider = document.getElementById('polSlider');
        const intSlider = document.getElementById('intSlider'); // Êñ∞Â¢ûÁì¶Êï∏ÊªëÊ°ø
        
        const azDisplay = document.getElementById('azDisplay');
        const polDisplay = document.getElementById('polDisplay');
        const intDisplay = document.getElementById('intDisplay');
        
        const powerSwitch = document.getElementById('powerSwitch');
        const targetName = document.getElementById('targetName');

        function selectLight(id) {
            currentTarget = id;
            
            // UI Style
            document.querySelectorAll('.tab-btn').forEach(b => b.classList.remove('active'));
            document.getElementById('tab' + id.charAt(0).toUpperCase() + id.slice(1)).classList.add('active');
            
            // Sync Values
            const data = lights[id];
            azSlider.value = data.az;
            polSlider.value = data.pol;
            intSlider.value = data.intensity; // ÂêåÊ≠•Áì¶Êï∏
            powerSwitch.checked = data.on;
            targetName.innerText = data.name + " STATUS";
            
            updateVal(false);
        }

        function updateVal(updatePhysics = true) {
            const data = lights[currentTarget];
            if(updatePhysics) {
                data.az = parseInt(azSlider.value);
                data.pol = parseInt(polSlider.value);
                data.intensity = parseFloat(intSlider.value); // Êõ¥Êñ∞Áì¶Êï∏
            }
            
            azDisplay.innerText = data.az + "¬∞";
            polDisplay.innerText = data.pol + "¬∞";
            intDisplay.innerText = data.intensity;

            // UI Feedback
            const opacity = data.on ? '1' : '0.3';
            azSlider.parentElement.style.opacity = opacity;
            polSlider.parentElement.style.opacity = opacity;
            intSlider.parentElement.style.opacity = opacity;
            
            azSlider.disabled = !data.on;
            polSlider.disabled = !data.on;
            intSlider.disabled = !data.on;

            updateLightPos(currentTarget);
        }

        function toggleLight() {
            lights[currentTarget].on = powerSwitch.checked;
            updateVal(false);
            updateLightPos(currentTarget);
        }

        function updateLightPos(id) {
            const data = lights[id];
            const light = data.obj;
            light.visible = data.on;
            
            // ÂØ¶ÊôÇÊõ¥Êñ∞‰∫ÆÂ∫¶
            light.intensity = data.intensity;

            if(!data.on) return;

            const r = 6;
            const phi = (90 - data.pol) * (Math.PI / 180);
            const theta = (data.az + 90) * (Math.PI / 180);

            light.position.set(
                -(r * Math.sin(phi) * Math.cos(theta)),
                r * Math.cos(phi),
                r * Math.sin(phi) * Math.sin(theta)
            );
        }

        // --- 5. Core Loop ---
        function animate() {
            requestAnimationFrame(animate);
            mesh.rotation.y += 0.002; 
            renderer.render(scene, camera);
        }

        window.addEventListener('resize', () => {
            const w = wrapper.clientWidth;
            const h = wrapper.clientHeight;
            camera.aspect = w / h;
            camera.updateProjectionMatrix();
            renderer.setSize(w, h);
        });

        // Init
        updateLightPos('key');
        updateLightPos('fill');
        updateLightPos('rim');
        selectLight('key'); 
        animate();

    </script>
</body>
</html>
