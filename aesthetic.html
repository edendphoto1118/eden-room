<!DOCTYPE html>
<html lang="zh-TW">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Aesthetic DNA Test | EDEN LAB</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://html2canvas.hertzen.com/dist/html2canvas.min.js"></script>
    <link href="https://fonts.googleapis.com/css2?family=Cinzel:wght@400;700&family=Space+Mono:ital,wght@0,400;1,400&family=Noto+Serif+TC:wght@400;700&display=swap" rel="stylesheet">
    
    <script>
        tailwind.config = {
            theme: {
                extend: {
                    fontFamily: { 
                        serif: ['Cinzel', 'serif'], 
                        mono: ['Space Mono', 'monospace'],
                        zh: ['Noto Serif TC', 'serif'] 
                    },
                    colors: { eden: { dark: '#0a0a0a', gold: '#BF953F', glass: 'rgba(20, 20, 20, 0.95)' } },
                    animation: { 'fade-in': 'fadeIn 0.8s ease-out' },
                    keyframes: {
                        fadeIn: { '0%': { opacity: '0', transform: 'translateY(10px)' }, '100%': { opacity: '1', transform: 'translateY(0)' } }
                    }
                }
            }
        }
    </script>

    <style>
        body { background-color: #050505; color: #e2e8f0; overflow-x: hidden; }
        .bg-noise { position: fixed; top: 0; left: 0; width: 100%; height: 100%; opacity: 0.04; pointer-events: none; z-index: 0; filter: contrast(300%); background: url("data:image/svg+xml,%3Csvg viewBox='0 0 200 200' xmlns='http://www.w3.org/2000/svg'%3E%3Cfilter id='noiseFilter'%3E%3CfeTurbulence type='fractalNoise' baseFrequency='0.8' numOctaves='3' stitchTiles='stitch'/%3E%3C/filter%3E%3Crect width='100%25' height='100%25' filter='url(%23noiseFilter)' opacity='1'/%3E%3C/svg%3E"); }
        
        /* 玻璃面板 */
        .glass-panel { background: rgba(30, 30, 30, 0.7); backdrop-filter: blur(16px); border: 1px solid rgba(255, 255, 255, 0.08); box-shadow: 0 20px 40px rgba(0,0,0,0.6); }
        .input-field { background: rgba(0,0,0,0.4); border: 1px solid #333; color: #fff; transition: 0.3s; text-align: center; font-family: 'Space Mono', monospace; }
        .input-field:focus { border-color: #BF953F; outline: none; background: rgba(191, 149, 63, 0.05); }

        /* 選項按鈕 */
        .option-btn { 
            background: rgba(255,255,255,0.03); border: 1px solid #333; padding: 15px; width: 100%; text-align: left; 
            transition: all 0.3s; margin-bottom: 10px; border-radius: 8px; font-size: 0.9rem;
        }
        .option-btn:hover { border-color: #BF953F; background: rgba(191, 149, 63, 0.1); transform: translateX(5px); }

        /* 金色按鈕 (雙層文字設計) */
        .btn-gold { 
            background: linear-gradient(to bottom, #BF953F, #9e7b30); 
            color: #000; 
            transition: 0.3s; 
            box-shadow: 0 4px 15px rgba(191, 149, 63, 0.2);
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            line-height: 1.2;
        }
        .btn-gold:hover { transform: translateY(-2px); box-shadow: 0 6px 20px rgba(191, 149, 63, 0.4); filter: brightness(1.1); }

        /* 結果卡片 (IG Story 尺寸 9:16) */
        .result-card {
            background: #080808;
            border: 1px solid #BF953F;
            padding: 30px;
            width: 100%;
            max-width: 380px; 
            margin: 0 auto;
            position: relative;
            background-image: radial-gradient(circle at top right, rgba(191, 149, 63, 0.05) 0%, transparent 40%);
        }
    </style>
</head>
<body class="flex flex-col items-center min-h-screen font-sans selection:bg-[#BF953F] selection:text-black pb-20">

    <div class="bg-noise"></div>

    <header class="relative z-10 w-full flex justify-center py-6 fade-in">
        <div class="text-center">
            <a href="index.html" class="block text-[10px] tracking-[0.3em] text-gray-500 hover:text-[#BF953F] mb-1 transition-colors">← EDEN LAB</a>
            <h1 class="font-serif text-[#BF953F] text-lg tracking-widest">AESTHETIC DNA TEST</h1>
        </div>
    </header>

    <main class="relative z-10 w-full max-w-md px-6">
        
        <div id="phase-identity" class="animate-fade-in text-center">
            <h2 class="font-serif text-2xl text-white mb-2">Subject Identity</h2>
            <p class="text-gray-400 text-xs mb-8 font-mono">建立檔案，開始你的美感分析</p>
            
            <div class="glass-panel p-8 rounded-xl space-y-5">
                <div class="text-left">
                    <label class="text-[10px] text-[#BF953F] tracking-widest block mb-1">NAME / ALIAS</label>
                    <input type="text" id="userName" class="input-field w-full p-3 rounded text-sm" placeholder="輸入你的名字">
                </div>
                <div class="text-left">
                    <label class="text-[10px] text-[#BF953F] tracking-widest block mb-1">DATE OF BIRTH</label>
                    <input type="date" id="userDate" class="input-field w-full p-3 rounded text-xs uppercase">
                </div>
                <button onclick="startQuiz()" class="btn-gold w-full py-4 rounded text-sm tracking-widest font-bold">START DIAGNOSIS</button>
            </div>
        </div>

        <div id="phase-quiz" class="hidden w-full">
            <div class="glass-panel p-6 rounded-xl">
                <div class="flex justify-between items-end mb-6 border-b border-[#333] pb-2">
                    <span class="text-[#BF953F] font-mono text-xl" id="questionNumber">01</span>
                    <span class="text-gray-600 text-[10px] tracking-widest">VISUAL PSYCHOLOGY</span>
                </div>
                
                <h3 id="questionText" class="font-serif text-lg text-white mb-6 leading-relaxed min-h-[60px]">Question text...</h3>
                
                <div id="optionsContainer">
                    </div>
            </div>
        </div>

        <div id="phase-loading" class="hidden text-center py-20">
            <div class="inline-block w-12 h-12 border-[1px] border-[#BF953F] border-t-transparent rounded-full animate-spin mb-6"></div>
            <p class="font-mono text-[#BF953F] text-xs tracking-widest animate-pulse">ANALYZING SUBCONSCIOUS DATA...</p>
        </div>

        <div id="phase-result" class="hidden flex flex-col items-center w-full">
            
            <p class="text-gray-400 text-[10px] mb-4 tracking-widest">DIAGNOSIS COMPLETE</p>

            <div id="captureArea" class="result-card shadow-2xl">
                <div class="flex justify-between items-start mb-6">
                    <div>
                        <p class="text-[9px] text-[#BF953F] tracking-[0.2em] mb-1">EDEN LAB // VISUAL REPORT</p>
                        <h3 id="resName" class="font-serif text-white text-xl uppercase">USER</h3>
                    </div>
                    <div class="text-right">
                        <p class="text-[9px] text-gray-500 font-mono" id="resDate">2026.01.05</p>
                        <p class="text-[9px] text-gray-500 font-mono">ID: <span id="resNum">001</span></p>
                    </div>
                </div>

                <div class="text-center py-5 border-t border-b border-[#222]">
                    <p class="text-[10px] text-gray-400 tracking-widest mb-1">YOUR AESTHETIC ARCHETYPE</p>
                    <h2 id="resTitleEn" class="font-serif text-2xl text-[#BF953F] leading-none mb-1">THE ARCHETYPE</h2>
                    <h2 id="resTitleZh" class="font-zh text-xl text-white tracking-widest font-light">原型中文</h2>
                    <p id="resKeywords" class="font-mono text-[9px] text-gray-500 tracking-widest mt-2">#KEYWORD #KEYWORD</p>
                </div>

                <div class="py-6 space-y-6">
                    <div>
                        <h4 class="font-serif text-white text-xs mb-2 flex items-center gap-2">
                            <span class="w-1 h-3 bg-[#BF953F]"></span> SOUL ANALYSIS
                        </h4>
                        <p id="resDesc" class="text-[11px] text-gray-300 leading-relaxed text-justify font-light opacity-90"></p>
                    </div>

                    <div class="bg-[#111] p-3 border border-[#333] rounded">
                        <h4 class="font-serif text-[#BF953F] text-xs mb-2">VISUAL DIRECTIVE</h4>
                        <p id="resAdvice" class="text-[10px] text-gray-400 font-mono leading-relaxed italic"></p>
                    </div>

                    <div>
                        <h4 class="font-mono text-[9px] text-gray-500 mb-2 tracking-widest uppercase">Signature Palette</h4>
                        <div class="grid grid-cols-4 gap-2 h-12" id="resColors"></div>
                    </div>
                </div>

                <div class="mt-4 pt-4 border-t border-[#333] text-center">
                    <p class="text-[9px] text-gray-400 mb-2">VERIFIED BY EDEN PHOTOGRAPHY</p>
                    <div class="inline-block border border-[#BF953F] px-4 py-1 mb-2">
                        <p class="font-mono text-[#BF953F] text-xs tracking-widest">CODE: EDEN_DNA</p>
                    </div>
                    <p class="text-[8px] text-gray-600">憑此診斷書預約拍攝，享專屬方案折扣</p>
                </div>
            </div>

            <div class="w-full max-w-xs mt-8 space-y-4">
                
                <button onclick="downloadCard()" class="btn-gold w-full py-4 rounded-md shadow-lg group">
                    <span class="text-sm tracking-widest font-bold mb-1">留存診斷結果</span>
                    <span class="text-[10px] font-normal opacity-80 group-hover:opacity-100">截圖並私訊 EDEN 預約拍攝</span>
                </button>

                <div class="flex justify-between gap-3">
                     <a href="https://www.instagram.com/eden_d_photo/" target="_blank" class="w-1/2 text-center py-3 border border-gray-800 text-gray-500 rounded text-[10px] hover:text-[#BF953F] hover:border-[#BF953F] transition-colors">
                        前往 Instagram ↗
                    </a>
                    <button onclick="location.reload()" class="w-1/2 text-center py-3 border border-gray-800 text-gray-500 rounded text-[10px] hover:text-white hover:border-white transition-colors">
                        ↺ 重新測驗
                    </button>
                </div>
            </div>

        </div>

    </main>

    <script>
        // --- 9大美學原型資料庫 (含中文標題) ---
        const archetypes = {
            1: {
                title: "THE PIONEER (開創者)",
                keywords: "#MINIMAL #SHARP #BOLD",
                desc: "你擁有強烈的個人意志，討厭拖泥帶水。你的美感來自於「減法」。在視覺上，繁複的裝飾會掩蓋你的鋒芒，你需要的是極致的乾淨與俐落。",
                advice: "指令：高反差黑白肖像。穿著剪裁俐落的黑色高領，背景留白，使用硬光 (Hard Light) 勾勒出堅毅的眼神。",
                colors: ["#000000", "#FFFFFF", "#333333", "#BF953F"]
            },
            2: {
                title: "THE DIPLOMAT (協調者)",
                keywords: "#SOFT #FLOW #DETAIL",
                desc: "你對細節與和諧有著天生的敏感度。銳利的線條不適合你，你的靈魂渴望柔和的光影與細膩的材質感。你的美是慢熱的，越看越有味道。",
                advice: "指令：自然光下的莫蘭迪色調。穿著亞麻或絲質服裝，捕捉光影在臉龐上溫柔的過渡，眼神要放鬆且包容。",
                colors: ["#D7D0C8", "#A6A29A", "#8C8680", "#EAE6E1"]
            },
            3: {
                title: "THE ARTIST (藝術家)",
                keywords: "#DRAMA #VIBRANT #MOOD",
                desc: "你不需要低調，你的靈魂渴望表達。標準的證件照式拍攝會扼殺你的靈氣。你需要戲劇性的張力、大膽的色彩，甚至是動態模糊帶來的藝術感。",
                advice: "指令：王家衛式的電影情緒片。嘗試霓虹光感或撞色打光，在雨後的街道或昏暗的酒吧，捕捉一瞬間的回眸。",
                colors: ["#FF3366", "#3300FF", "#00FFCC", "#111111"]
            },
            4: {
                title: "THE BUILDER (建構者)",
                keywords: "#ORDER #STRUCTURE #SOLID",
                desc: "你在秩序與結構中找到安寧。混亂的背景會讓你感到焦慮。適合你的視覺風格需要嚴謹的幾何構圖，展現出一種穩重且值得信賴的專業權威感。",
                advice: "指令：古典主義建築背景。構圖絕對水平垂直，穿著成套西裝，雙手插口袋，展現如建築物般的穩定氣場。",
                colors: ["#1C2331", "#8B0000", "#F5F5F5", "#2F4F4F"]
            },
            5: {
                title: "THE EXPLORER (探索者)",
                keywords: "#WILD #FREE #STREET",
                desc: "你不受框架拘束，渴望自由。傳統的攝影棚拍對你來說太過拘謹。你需要走入街頭或荒野，用廣角鏡頭捕捉你不羈的靈魂與瞬間的張力。",
                advice: "指令：廣角街頭抓拍 (Snapshot)。不看鏡頭，在奔跑或大笑中捕捉動態，背景是流動的城市或廢墟。",
                colors: ["#FF4500", "#2F4F4F", "#708090", "#F0E68C"]
            },
            6: {
                title: "THE HEALER (療癒者)",
                keywords: "#WARM #HOME #GLOW",
                desc: "你自帶溫暖的治癒氣場。冷冽的科技感不適合你。你的影像應該充滿溫度，像是午後三點的陽光，讓人看一眼就感到放鬆與被接納。",
                advice: "指令：逆光下的居家感。手捧熱咖啡，身邊有植栽或書籍，讓髮絲染上金邊，捕捉最沒有防備的溫柔時刻。",
                colors: ["#FFD700", "#FFA07A", "#8B4513", "#FFF8DC"]
            },
            7: {
                title: "THE ANALYST (哲學家)",
                keywords: "#COOL #ABSTRACT #DEEP",
                desc: "你透過思考來理解世界。適合你的風格是冷靜、抽離且帶有哲學意味的。藍灰色調、局部特寫，展現出一種高智感的疏離美。",
                advice: "指令：透過玻璃或鏡像拍攝。冷色調處理，聚焦在手部特寫或眼神，展現出一種正在解析世界的智性氛圍。",
                colors: ["#000080", "#778899", "#C0C0C0", "#E0FFFF"]
            },
            8: {
                title: "THE EXECUTIVE (權威者)",
                keywords: "#LUXURY #CLASSIC #POWER",
                desc: "你天生屬於舞台中央。你需要的是能夠展現「價值感」的影像。精緻的打光、深邃的暗部細節，襯托你的高貴與掌控全局的力量。",
                advice: "指令：倫勃朗光 (Rembrandt Lighting) 的商業大片。深色背景，強調服裝質感與珠寶手錶細節，坐姿霸氣。",
                colors: ["#000000", "#DAA520", "#800000", "#4B0082"]
            },
            9: {
                title: "THE HUMANITARIAN (博愛者)",
                keywords: "#ZEN #NATURE #VAST",
                desc: "你的視野宏大，關注本質。狹窄的室內不適合你。你需要在廣闊的空間中才能展現那種超脫世俗的空靈感。天人合一的禪意美學最適合你。",
                advice: "指令：超廣角大景。將人物縮小置於大自然中，大量留白，不強調表情，而是強調人與環境的和諧共存。",
                colors: ["#228B22", "#87CEEB", "#F0FFF0", "#708090"]
            }
        };

        const questions = [
            {
                text: "週末早晨，你理想的狀態是？",
                options: [
                    { text: "在極簡的咖啡廳，專注規劃下週行程。", scores: [1, 4, 8] },
                    { text: "窩在有陽光的沙發上，擼貓看書。", scores: [2, 6] },
                    { text: "背上背包，去探索城市未知的角落。", scores: [3, 5] },
                    { text: "去美術館看展，或是獨自冥想。", scores: [7, 9] }
                ]
            },
            {
                text: "打開你的衣櫃，最常見的色系是？",
                options: [
                    { text: "黑、白、灰，剪裁俐落。", scores: [1, 7] },
                    { text: "大地色、亞麻、柔軟的材質。", scores: [2, 6, 9] },
                    { text: "鮮豔的撞色，或是獨特的印花。", scores: [3, 5] },
                    { text: "深藍、西裝、有質感的精品。", scores: [4, 8] }
                ]
            },
            {
                text: "你希望別人如何形容你的照片？",
                options: [
                    { text: "好酷、有個性、很有態度。", scores: [1, 3, 5] },
                    { text: "好有氣質、看了很舒服。", scores: [2, 6, 9] },
                    { text: "很專業、很成功、有質感。", scores: [4, 8] },
                    { text: "很有深意、看不透、很高級。", scores: [7] }
                ]
            },
            {
                text: "如果讓你選擇一個拍攝場景，你會選？",
                options: [
                    { text: "乾淨的清水模牆面或攝影棚。", scores: [1, 4] },
                    { text: "充滿生活感的居家空間或森林。", scores: [2, 6, 9] },
                    { text: "夜晚的霓虹街道或廢墟。", scores: [3, 5] },
                    { text: "豪華的酒店大廳或辦公室。", scores: [8] }
                ]
            },
            {
                text: "你的靈魂關鍵詞是？",
                options: [
                    { text: "秩序與精準。", scores: [1, 4, 7] },
                    { text: "自由與表達。", scores: [3, 5] },
                    { text: "溫暖與連結。", scores: [2, 6] },
                    { text: "權力與影響。", scores: [8, 9] }
                ]
            }
        ];

        let currentQuestion = 0;
        let scores = {1:0, 2:0, 3:0, 4:0, 5:0, 6:0, 7:0, 8:0, 9:0};
        let userData = {};

        function startQuiz() {
            const name = document.getElementById('userName').value;
            const date = document.getElementById('userDate').value;
            
            if(!name || !date) {
                alert("請輸入完整資料以建立檔案。");
                return;
            }
            userData = { name, date };

            document.getElementById('phase-identity').classList.add('hidden');
            document.getElementById('phase-quiz').classList.remove('hidden');
            renderQuestion();
        }

        function renderQuestion() {
            const q = questions[currentQuestion];
            document.getElementById('questionNumber').innerText = `0${currentQuestion + 1}`;
            document.getElementById('questionText').innerText = q.text;
            
            const container = document.getElementById('optionsContainer');
            container.innerHTML = '';

            q.options.forEach(opt => {
                const btn = document.createElement('button');
                btn.className = 'option-btn font-mono text-gray-300';
                btn.innerText = opt.text;
                btn.onclick = () => selectOption(opt.scores);
                container.appendChild(btn);
            });
        }

        function selectOption(points) {
            points.forEach(id => { scores[id] += 1; });
            if (currentQuestion < questions.length - 1) {
                currentQuestion++;
                const quizBox = document.getElementById('phase-quiz');
                quizBox.classList.remove('hidden'); 
                renderQuestion();
            } else {
                finishQuiz();
            }
        }

        function finishQuiz() {
            document.getElementById('phase-quiz').classList.add('hidden');
            document.getElementById('phase-loading').classList.remove('hidden');

            let maxScore = -1;
            let winningId = 1;
            for (const [id, score] of Object.entries(scores)) {
                if (score > maxScore) {
                    maxScore = score;
                    winningId = id;
                } else if (score === maxScore) {
                    if (Math.random() > 0.5) winningId = id;
                }
            }

            setTimeout(() => { showResult(winningId); }, 1500);
        }

        function showResult(id) {
            const data = archetypes[id];
            
            // 處理標題：拆分中英文
            // 假設 data.title 是 "THE PIONEER (開創者)"
            // 我們用 split 拆成 "THE PIONEER" 和 "開創者)"
            const parts = data.title.split(' (');
            const enTitle = parts[0];
            const zhTitle = parts[1] ? parts[1].replace(')', '') : '';

            document.getElementById('resName').innerText = userData.name;
            document.getElementById('resDate').innerText = new Date().toISOString().split('T')[0].replace(/-/g, '.');
            document.getElementById('resNum').innerText = `00${id}`;
            
            document.getElementById('resTitleEn').innerText = enTitle;
            document.getElementById('resTitleZh').innerText = zhTitle;
            
            document.getElementById('resKeywords').innerText = data.keywords;
            document.getElementById('resDesc').innerText = data.desc;
            document.getElementById('resAdvice').innerText = data.advice;

            const colorBox = document.getElementById('resColors');
            colorBox.innerHTML = '';
            data.colors.forEach(c => {
                const div = document.createElement('div');
                div.className = 'h-full w-full border border-white/20';
                div.style.backgroundColor = c;
                colorBox.appendChild(div);
            });

            document.getElementById('phase-loading').classList.add('hidden');
            document.getElementById('phase-result').classList.remove('hidden');
        }

        function downloadCard() {
            const card = document.getElementById('captureArea');
            card.classList.remove('shadow-2xl');
            
            html2canvas(card, {
                backgroundColor: "#080808",
                scale: 2,
                useCORS: true
            }).then(canvas => {
                const link = document.createElement('a');
                link.download = `EDEN_DNA_${userData.name}.png`;
                link.href = canvas.toDataURL();
                link.click();
                
                card.classList.add('shadow-2xl');
                
                // 截圖後，彈出提示引導
                alert("診斷書已儲存！請將此圖私訊給 EDEN 官方帳號以完成預約。");
                window.open('https://www.instagram.com/eden_d_photo/', '_blank');
            });
        }
    </script>
</body>
</html>
