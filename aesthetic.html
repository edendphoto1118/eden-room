<!DOCTYPE html>
<html lang="zh-TW">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Aesthetic DNA Test | EDEN LAB</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://html2canvas.hertzen.com/dist/html2canvas.min.js"></script>
    <link href="https://fonts.googleapis.com/css2?family=Cinzel:wght@400;700&family=Space+Mono:ital,wght@0,400;1,400&family=Noto+Serif+TC:wght@300;400;600&display=swap" rel="stylesheet">
    
    <script>
        tailwind.config = {
            theme: {
                extend: {
                    fontFamily: { 
                        serif: ['Cinzel', 'serif'], 
                        mono: ['Space Mono', 'monospace'],
                        zh: ['Noto Serif TC', 'serif'] 
                    },
                    colors: { eden: { dark: '#020202', gold: '#C5A059' } },
                    animation: { 'fade-in': 'fadeIn 0.8s ease-out' },
                    keyframes: {
                        fadeIn: { '0%': { opacity: '0', transform: 'translateY(10px)' }, '100%': { opacity: '1', transform: 'translateY(0)' } }
                    }
                }
            }
        }
    </script>

    <style>
        body { 
            background-color: #020202; 
            color: #e2e8f0; 
            overflow-x: hidden; 
            /* ÈùúÊÖãË≥™ÊÑüÂô™Èªû */
            background-image: url("data:image/svg+xml,%3Csvg viewBox='0 0 200 200' xmlns='http://www.w3.org/2000/svg'%3E%3Cfilter id='noiseFilter'%3E%3CfeTurbulence type='fractalNoise' baseFrequency='0.8' numOctaves='3' stitchTiles='stitch'/%3E%3C/filter%3E%3Crect width='100%25' height='100%25' filter='url(%23noiseFilter)' opacity='0.03'/%3E%3C/svg%3E");
        }
        
        /* ÁéªÁíÉÈù¢Êùø (Êõ¥Ê∑±ÈÇÉ) */
        .glass-panel { 
            background: #050505; 
            border: 1px solid #151515; 
            box-shadow: 0 20px 40px rgba(0,0,0,0.8); 
        }
        
        /* Ëº∏ÂÖ•Ê°ÜÊ®£Âºè */
        .input-group label { display: block; font-size: 9px; color: #666; letter-spacing: 0.15em; margin-bottom: 6px; font-family: 'Space Mono'; text-transform: uppercase; }
        .input-field { 
            background: #0a0a0a; 
            border: 1px solid #222; 
            color: #fff; 
            transition: 0.3s; 
            text-align: center; 
            font-family: 'Space Mono', monospace; 
            width: 100%; 
            padding: 12px; 
            font-size: 13px; 
            border-radius: 0; /* Áõ¥ËßíÊõ¥‰øêËêΩ */
        }
        .input-field:focus { border-color: #C5A059; outline: none; background: #0f0f0f; }
        
        /* ‰∏ãÊãâÈÅ∏ÂñÆ‰øÆÂæ© */
        select.input-field { appearance: none; -webkit-appearance: none; cursor: pointer; }
        select.input-field option { background-color: #0a0a0a; color: #fff; padding: 10px; }

        /* ÈÅ∏È†ÖÊåâÈàï */
        .option-btn { 
            background: #0a0a0a; border: 1px solid #222; padding: 20px; width: 100%; text-align: left; 
            transition: all 0.3s; margin-bottom: 10px; font-size: 0.9rem; font-family: 'Noto Serif TC', serif; letter-spacing: 0.05em; line-height: 1.6; color: #888;
        }
        .option-btn:hover { border-color: #C5A059; background: #0f0f0f; transform: translateX(5px); color: #fff; }

        /* ÈáëËâ≤ÊåâÈàï */
        .btn-gold { 
            background: #C5A059; color: #000; transition: 0.3s; 
            box-shadow: 0 4px 15px rgba(197, 160, 89, 0.1); display: flex; flex-direction: column; 
            align-items: center; justify-content: center; line-height: 1.2;
            font-family: 'Space Mono', monospace;
        }
        .btn-gold:hover { background: #d4b06a; box-shadow: 0 6px 20px rgba(197, 160, 89, 0.3); }

        /* ÁµêÊûúÂç°Áâá */
        .result-card {
            background: #050505; border: 1px solid #333; padding: 30px; width: 100%; max-width: 380px; 
            margin: 0 auto; position: relative;
        }

        /* ÈõôËâ≤Á•® */
        .duo-swatch { height: 100%; border: 1px solid rgba(255,255,255,0.1); position: relative; }
        .color-label { position: absolute; bottom: 5px; left: 5px; font-size: 9px; font-family: 'Space Mono'; color: rgba(255,255,255,0.6); background: rgba(0,0,0,0.5); padding: 2px 4px;}

        /* Disclaimer ÂçÄÂüü */
        .disclaimer-box {
            border: 1px dashed #333;
            background: rgba(197, 160, 89, 0.03);
            padding: 12px;
            margin-top: 20px;
            margin-bottom: 15px;
        }
    </style>
</head>
<body class="flex flex-col items-center min-h-screen font-sans selection:bg-[#C5A059] selection:text-black pb-20">

    <header class="relative z-10 w-full flex justify-center py-8 fade-in">
        <div class="text-center">
            <a href="index.html" class="block text-[10px] tracking-[0.3em] text-gray-600 hover:text-[#C5A059] mb-2 transition-colors">‚Üê EDEN ROOM</a>
            <h1 class="font-serif text-[#C5A059] text-xl tracking-widest">VISUAL ORACLE</h1>
        </div>
    </header>

    <main class="relative z-10 w-full max-w-md px-6">
        
        <div id="phase-identity" class="animate-fade-in text-center">
            <h2 class="font-serif text-2xl text-white mb-2">Subject Identity</h2>
            <p class="text-gray-500 text-xs mb-8 font-mono">ESTABLISH PROFILE CONNECTION</p>
            
            <div class="glass-panel p-8 space-y-5">
                <div class="input-group text-left">
                    <label>NAME / ALIAS</label>
                    <input type="text" id="userName" class="input-field" placeholder="INPUT NAME">
                </div>
                
                <div class="flex gap-4">
                    <div class="input-group text-left w-1/2">
                        <label>BIRTH DATE</label>
                        <input type="date" id="userDate" class="input-field uppercase">
                    </div>
                    <div class="input-group text-left w-1/2">
                        <label>GENDER</label>
                        <select id="userGender" class="input-field">
                            <option value="Female">FEMALE</option>
                            <option value="Male">MALE</option>
                            <option value="Non-Binary">NON-BINARY</option>
                        </select>
                    </div>
                </div>

                <div class="flex gap-4">
                    <div class="input-group text-left w-1/2">
                        <label>INSTAGRAM</label>
                        <input type="text" id="userIG" class="input-field" placeholder="@ID">
                    </div>
                    <div class="input-group text-left w-1/2">
                        <label>CITY</label>
                        <select id="userCity" class="input-field">
                            <option value="Taipei">TAIPEI</option>
                            <option value="New Taipei">NEW TAIPEI</option>
                            <option value="Taoyuan">TAOYUAN</option>
                            <option value="Taichung">TAICHUNG</option>
                            <option value="Tainan">TAINAN</option>
                            <option value="Kaohsiung">KAOHSIUNG</option>
                            <option value="Other">OTHER</option>
                        </select>
                    </div>
                </div>

                <div class="disclaimer-box text-left">
                    <div class="flex items-start gap-2">
                        <span class="text-[#C5A059] text-[10px] pt-1">üîí</span>
                        <p class="font-mono text-[9px] text-gray-500 leading-relaxed text-justify">
                            <span class="text-[#C5A059] font-bold">DATA PROTOCOL:</span> 
                            Initiating this diagnosis grants EDEN permission to archive your profile for future casting & mutual collaboration opportunities.
                            <br><span class="opacity-60 block mt-1">(ÂïüÂãïÊ≠§Ë®∫Êñ∑Âç≥ÂêåÊÑèÂ∞áË≥áÊñôÂª∫Ê™îÔºå‰∏¶ÂàóÂÖ• EDEN ‰∫íÊÉ†ÊãçÊîùËàáÈÅ∏ËßíÂÑ™ÂÖàÂêçÂñÆ„ÄÇ)</span>
                        </p>
                    </div>
                </div>

                <button onclick="startQuiz()" class="btn-gold w-full py-4 text-xs tracking-[0.2em] font-bold mt-2 hover:brightness-110">
                    INITIALIZE DIAGNOSIS
                </button>
            </div>
        </div>

        <div id="phase-quiz" class="hidden w-full">
            <div class="glass-panel p-6">
                <div class="flex justify-between items-end mb-8 border-b border-[#222] pb-4">
                    <span class="text-[#C5A059] font-mono text-xl" id="questionNumber">01</span>
                    <span class="text-gray-600 text-[9px] tracking-[0.2em]">SUBCONSCIOUS ANALYSIS</span>
                </div>
                
                <h3 id="questionText" class="font-zh text-lg text-gray-200 mb-10 leading-relaxed font-light tracking-wide min-h-[60px]">Question...</h3>
                
                <div id="optionsContainer"></div>
            </div>
        </div>

        <div id="phase-loading" class="hidden text-center py-24">
            <div class="inline-block w-px h-12 bg-[#C5A059] animate-spin mb-6"></div>
            <p class="font-mono text-[#C5A059] text-[10px] tracking-[0.3em] animate-pulse">COMPUTING AESTHETICS...</p>
        </div>

        <div id="phase-result" class="hidden flex flex-col items-center w-full">
            
            <p class="text-gray-600 text-[9px] mb-4 tracking-[0.3em]">ANALYSIS COMPLETE</p>

            <div id="captureArea" class="result-card shadow-2xl">
                <div class="border-b border-[#222] pb-4 mb-4">
                    <div class="flex justify-between items-start mb-4">
                        <div>
                            <p class="text-[8px] text-[#C5A059] tracking-[0.3em] mb-1">VISUAL ORACLE // REPORT</p>
                            <h3 id="resName" class="font-serif text-white text-lg uppercase tracking-wide">USER</h3>
                        </div>
                        <div class="text-right">
                            <p class="text-[9px] text-gray-600 font-mono" id="resDate">DATE</p>
                            <p class="text-[9px] text-gray-600 font-mono">ID: <span id="resNum">001</span></p>
                        </div>
                    </div>
                    
                    <div class="grid grid-cols-3 gap-2 bg-[#0a0a0a] p-3 border border-[#222]">
                        <div class="text-left">
                            <p class="text-[7px] text-[#666] tracking-wider mb-1">INSTAGRAM</p>
                            <p id="resIG" class="text-[9px] text-[#C5A059] font-mono truncate">@EDEN</p>
                        </div>
                        <div class="text-center border-l border-r border-[#222]">
                            <p class="text-[7px] text-[#666] tracking-wider mb-1">GENDER</p>
                            <p id="resGender" class="text-[9px] text-gray-300 font-mono">F</p>
                        </div>
                        <div class="text-right">
                            <p class="text-[7px] text-[#666] tracking-wider mb-1">LOCATION</p>
                            <p id="resCity" class="text-[9px] text-gray-300 font-mono">TAIPEI</p>
                        </div>
                    </div>
                </div>

                <div class="text-center py-4 mb-2">
                    <p class="text-[9px] text-gray-500 tracking-widest mb-2">AESTHETIC ARCHETYPE</p>
                    <h2 id="resTitleEn" class="font-serif text-2xl text-[#C5A059] leading-none mb-1">ARCHETYPE</h2>
                    <h2 id="resTitleZh" class="font-zh text-lg text-white tracking-widest font-light opacity-90">ÂéüÂûã‰∏≠Êñá</h2>
                    <p id="resKeywords" class="font-mono text-[8px] text-gray-600 tracking-widest mt-3">#KEYWORD</p>
                </div>

                <div class="space-y-6">
                    <div>
                        <h4 class="font-serif text-[#444] text-[9px] mb-2 flex items-center gap-2 tracking-widest">
                            <span class="w-1 h-1 bg-[#C5A059]"></span> INNER REFLECTION
                        </h4>
                        <p id="resDesc" class="font-zh text-[10px] text-gray-400 leading-relaxed text-justify font-light"></p>
                    </div>

                    <div class="bg-[#0f0f0f] p-4 border-l-2 border-[#C5A059]">
                        <h4 class="font-serif text-[#C5A059] text-[9px] mb-2 tracking-widest">EDEN'S SUGGESTION</h4>
                        <p id="resReason" class="font-zh text-[10px] text-gray-500 leading-relaxed italic"></p>
                    </div>
                    
                    <div>
                        <h4 class="font-serif text-[#444] text-[9px] mb-2 flex items-center gap-2 tracking-widest">
                            <span class="w-1 h-1 bg-[#C5A059]"></span> VISUAL MANIFESTATION
                        </h4>
                        <p id="resVisual" class="font-zh text-[10px] text-gray-400 leading-relaxed text-justify font-light"></p>
                    </div>

                    <div>
                        <h4 class="font-mono text-[8px] text-gray-600 mb-2 tracking-widest uppercase">LUCKY PALETTE</h4>
                        <div class="flex h-12 w-full gap-0 border border-[#222]" id="resColors"></div>
                    </div>
                </div>

                <div class="mt-6 pt-4 border-t border-[#222] text-center">
                    <div class="inline-block border border-[#333] px-3 py-1 mb-2">
                        <p class="font-mono text-gray-500 text-[8px] tracking-widest">VERIFIED BY EDEN</p>
                    </div>
                </div>
            </div>

            <div class="w-full max-w-xs mt-8 space-y-3">
                <button onclick="downloadCard()" class="btn-gold w-full py-4 shadow-lg group">
                    <span class="text-xs tracking-[0.2em] font-bold">SAVE RESULT</span>
                </button>

                <div class="flex justify-between gap-3">
                     <a href="https://www.instagram.com/eden_d_photo/" target="_blank" class="w-1/2 text-center py-3 border border-[#222] text-gray-600 text-[9px] hover:text-[#C5A059] hover:border-[#C5A059] transition-colors font-mono tracking-widest">
                        VISIT INSTAGRAM
                    </a>
                    <button onclick="location.reload()" class="w-1/2 text-center py-3 border border-[#222] text-gray-600 text-[9px] hover:text-white hover:border-white transition-colors font-mono tracking-widest">
                        RESTART
                    </button>
                </div>
            </div>
        </div>
    </main>

    <script>
        // --- 9Â§ßÁæéÂ≠∏ÂéüÂûãË≥áÊñôÂ∫´ (Master-level text) ---
        const archetypes = {
            1: {
                title: "THE PIONEER (ÈñãÂâµËÄÖ)",
                keywords: "#MINIMAL #BOLD",
                desc: "‰Ω†ÊìÅÊúâÂº∑Â§ßÁöÑÂÖßÂú®È©ÖÂãïÂäõÔºåÁøíÊÖ£Âú®Ê∑∑‰∫Ç‰∏≠ËøÖÈÄüÊâæÂà∞Áß©Â∫è„ÄÇ‰Ω†Ë®éÂé≠ÊãñÊ≥•Â∏∂Ê∞¥Ôºå‰πü‰∏çÂñúÊ≠°ÈÅéÂ∫¶ÂåÖË£ù„ÄÇ‰Ω†ÁöÑÈ≠ÖÂäõ‰æÜËá™ÊñºÈÇ£Á®Æ„ÄéÊàëÁü•ÈÅìÊàëË¶Å‰ªÄÈ∫º„ÄèÁöÑÂ†ÖÂÆö„ÄÇ",
                reason: "ÈÄôÊòØ‰∏ÄÂÄãËΩâÊäòÈªû„ÄÇÁèæÂú®ÁöÑ‰Ω†ÔºåÊØî‰ª•ÂæÄ‰ªª‰ΩïÊôÇÂÄôÈÉΩÊõ¥ÈúÄË¶Å‰∏ÄÂºµËÉΩÂ§†„ÄéÂÆöÁæ©Ëá™Â∑±„ÄèÁöÑÁÖßÁâá„ÄÇ‰∏çÈúÄË¶ÅË®éÂ•Ω‰ªª‰Ωï‰∫∫ÔºåÂè™Ë¶ÅÁ¥îÁ≤πÂú∞ÂÆ£Âëä‰Ω†ÁöÑÂ≠òÂú®„ÄÇ",
                visual: "È´òÂèçÂ∑ÆÈªëÁôΩËÇñÂÉè„ÄÇËÉåÊôØÊòØÊ•µËá¥ÁöÑÁ¥îÊ∑®Ôºå‰∏ÄÈÅìÁ°¨ÂÖâ (Hard Light) ‰øêËêΩÂú∞ÂãæÂãíÂá∫‰Ω†ÁöÑËº™Âªì„ÄÇ‰Ω†Á©øËëóÂâ™Ë£ÅÂêàË∫´ÁöÑÈ´òÈ†òÈªëË°£ÔºåÁúºÁ•ûÁõ¥Ë¶ñÈè°È†≠„ÄÇ",
                colors: ["#1A1A1A", "#C5A059"] 
            },
            2: {
                title: "THE DIPLOMAT (ÂçîË™øËÄÖ)",
                keywords: "#SOFT #FLOW",
                desc: "‰Ω†Â∞çÂë®ÈÅ≠ÁöÑÊÉÖÁ∑íÊµÅÂãïÊúâËëóÊ•µÈ´òÁöÑÊïèÈä≥Â∫¶„ÄÇ‰Ω†ÂÖßÂøÉÊúâ‰∏ÄÁâáÂØßÈùúÁöÑÊπñÊ≥äÔºåÈõñÁÑ∂‰∏çÂ∏∏Â§ßËÅ≤ÂñßÂò©Ôºå‰ΩÜÈÇ£‰ªΩÂÆâÂÆöÁöÑÂäõÈáèÂçªËÉΩÊ∑±Ê∑±ÊÑüÊüìË∫´ÈÇäÁöÑ‰∫∫„ÄÇ",
                reason: "‰Ω†Á∏ΩÊòØÁøíÊÖ£ÁÖßÈ°ßÂà•‰∫∫ÔºåÂçªÈÆÆÂ∞ëËä±ÊôÇÈñìÂ•ΩÂ•ΩÁúãËá™Â∑±„ÄÇÈÄôÁµÑÁÖßÁâáÊòØÁµ¶‰Ω†ÁöÑÁ¶ÆÁâ©ÔºåË®òÈåÑ‰∏ã‰Ω†Ê≠§ÂàªÊ∫´ÊüîËÄåÂ†ÖÂÆöÁöÑÊ®°Ê®£„ÄÇ",
                visual: "Ëá™ÁÑ∂ÂÖâ‰∏ãÁöÑËé´Ëò≠Ëø™Ëâ≤Ë™ø„ÄÇÁ©øËëó‰∫ûÈ∫ªÊàñÁµ≤Ë≥™ÁöÑÊüîËªüË°£Áâ©ÔºåÂÖâÂΩ±ÈÄèÈÅéÁ™óÁ∞æÂú®‰Ω†ÁöÑËáâÈæê‰∏äÂΩ¢ÊàêÊ∫´ÊüîÁöÑÊº´Â∞Ñ„ÄÇ",
                colors: ["#E0D8D1", "#A89F91"] 
            },
            3: {
                title: "THE ARTIST (ËóùË°ìÂÆ∂)",
                keywords: "#DRAMA #VIBRANT",
                desc: "‰Ω†ÁöÑÈùàÈ≠ÇÊãíÁµïÂπ≥Â∫∏ÔºåÂ∞ç‰∏ñÁïåÊúâËëóÁç®ÁâπÁöÑÊøæÈè°„ÄÇ‰Ω†ÊÑüÂèóÂà∞ÁöÑÊÉÖÁ∑íÊØîÂ∏∏‰∫∫Êõ¥Âº∑ÁÉà„ÄÇ‰Ω†Ê∏¥ÊúõË°®ÈÅîÔºåÊ∏¥ÊúõË¢´ÁúãË¶ãÈÇ£‰∫õÁÑ°Ê≥ïÁî®Ë®ÄË™ûÂΩ¢ÂÆπÁöÑÂÖßÂú®È¢®ÊôØ„ÄÇ",
                reason: "Ê≠§Âàª‰Ω†ÂÖßÂøÉÊæéÊπÉÁöÑÊÉÖÊÑüÈúÄË¶Å‰∏ÄÂÄãÂá∫Âè£„ÄÇ‰Ω†ÈúÄË¶ÅÈÄèÈÅéÂΩ±ÂÉèÁöÑÂºµÂäõÔºåÂ∞áÂÖßÂú®ÁöÑÁÅ´ÁÑ∞ÂÖ∑Ë±°ÂåñÔºåËÆìÈÄô‰ªΩËÉΩÈáèË¢´Ê∞∏‰πÖÂ∞ÅÂ≠ò„ÄÇ",
                visual: "ÁéãÂÆ∂Ë°õÂºèÁöÑÈõªÂΩ±Ê∞õÂúç„ÄÇÈúìËôπÂÖâÊÑüËàáÂ§ßËÜΩÁöÑÊíûËâ≤ÔºåÊàñË®±ÊòØÂú®Èõ®ÂæåÁöÑË°óÈÅìÔºåÂãïÊÖãÊ®°Á≥äÊçïÊçâ‰Ω†ÂõûÁú∏ÁöÑÁû¨Èñì„ÄÇ",
                colors: ["#2D2424", "#7D3C3C"] 
            },
            4: {
                title: "THE BUILDER (Âª∫ÊßãËÄÖ)",
                keywords: "#ORDER #STRUCTURE",
                desc: "‰Ω†ÊòØ‰∏ÄÂÄãÂÄºÂæó‰ø°Ë≥¥ÁöÑ‰∫∫ÔºåÂÉè‰∏ÄÂ∫ßÁ©©Âõ∫ÁöÑÂª∫ÁØâ„ÄÇ‰Ω†Âú®Áß©Â∫èËàáÁµêÊßã‰∏≠ÊâæÂà∞ÂÆâÂØßÔºåÂ∞çÂ∞àÊ•≠ËàáÁ¥∞ÁØÄÊúâËëó‰∏çÂ¶•ÂçîÁöÑÂ†ÖÊåÅ„ÄÇ",
                reason: "‰Ω†ÁöÑÂ∞àÊ•≠ÂΩ¢Ë±°ÈúÄË¶Å‰∏ÄÊ¨°ÂçáÁ¥ö„ÄÇ‰Ω†ÈúÄË¶Å‰∏ÄÁµÑËÉΩÂ§†ÂåπÈÖç‰Ω†Áï∂ÂâçÈ´òÂ∫¶ÁöÑÂΩ±ÂÉèÔºåÂ±ïÁèæÈÇ£Á®Æ„Äé‰∏çÊÄíËá™Â®Å„ÄèÁöÑÂ∞àÊ•≠ÊÑü„ÄÇ",
                visual: "Âè§ÂÖ∏‰∏ªÁæ©Âª∫ÁØâÊàñÂπæ‰ΩïÁ∑öÊ¢ùËÉåÊôØ„ÄÇÊßãÂúñÁµïÂ∞çÊ∞¥Âπ≥ÂûÇÁõ¥ÔºåÂ±ïÁèæÁß©Â∫èÁæé„ÄÇ‰Ω†Á©øËëóÂâ™Ë£ÅÂÆåÁæéÁöÑÊàêÂ•óË•øË£ù„ÄÇ",
                colors: ["#1F2937", "#5D4037"] 
            },
            5: {
                title: "THE EXPLORER (Êé¢Á¥¢ËÄÖ)",
                keywords: "#WILD #FREE",
                desc: "‰Ω†‰∏çÂèóÊ°ÜÊû∂ÊãòÊùüÔºåÈùàÈ≠ÇË£°‰ΩèËëó‰∏ÄÈô£È¢®„ÄÇ‰Ω†Â∞çÊú™Áü•ÂÖÖÊªøÂ•ΩÂ•áÔºåË®éÂé≠‰∏ÄÊàê‰∏çËÆäÁöÑÁîüÊ¥ª„ÄÇ‰Ω†ÁöÑÁîüÂëΩÂäõÂú®ÊµÅÂãï‰∏≠ÊúÄÂº∑Â§ß„ÄÇ",
                reason: "Ë®òÈåÑ‰∏ã‰Ω†Ê≠§Âàª‰∏çË¢´È¶¥ÊúçÁöÑÊ®£Â≠êÂêß„ÄÇÈÄôÁµÑÁÖßÁâá‰∏çÊòØÁÇ∫‰∫ÜÂ±ïÁ§∫Áµ¶Ë™∞ÁúãÔºåËÄåÊòØÁÇ∫‰∫ÜÊèêÈÜíÊú™‰æÜÁöÑ‰Ω†ÔºöÊ∞∏ÈÅ†‰∏çË¶ÅÂ§±ÂéªÈÄô‰ªΩËá™Áî±ÁöÑÈùàÈ≠Ç„ÄÇ",
                visual: "Âª£ËßíÈè°È†≠‰∏ãÁöÑË°óÈ†≠ÊäìÊãç„ÄÇËÉåÊôØÊòØÊµÅÂãïÁöÑÂüéÂ∏ÇÊàñÁ≤óÁç∑ÁöÑÂª¢Â¢ü„ÄÇ‰Ω†‰∏çÁúãÈè°È†≠ÔºåÈ´ÆÁµ≤Âú®È¢®‰∏≠È£õÊèö„ÄÇ",
                colors: ["#A0522D", "#6B7280"] 
            },
            6: {
                title: "THE HEALER (ÁôÇÁôíËÄÖ)",
                keywords: "#WARM #GLOW",
                desc: "‰Ω†Ëá™Â∏∂Ê∫´ÊöñÁöÑÊ≤ªÁôíÊ∞£Â†¥ÔºåÂ∞±ÂÉèÂÜ¨Êó•ÁöÑÊöñÈôΩ„ÄÇ‰∫∫ÂÄëÂñúÊ≠°Èù†Ëøë‰Ω†ÔºåÂõ†ÁÇ∫Âú®‰Ω†Ë∫´ÈÇäËÉΩÊÑüÂà∞Ë¢´Êé•Á¥ç„ÄÇ‰Ω†ÊáÇÂæóÊ¨£Ë≥û‰∏çÂÆåÁæé‰∏≠ÁöÑÁæé„ÄÇ",
                reason: "‰Ω†ÁöÑÊ∫´ÊöñÁ∏ΩÊòØÁµ¶‰∫ÜÂà•‰∫∫ÔºåÁèæÂú®Ë©≤Ëº™Âà∞‰Ω†Ë¢´Ê∫´Êüî‰ª•ÂæÖ„ÄÇÈÄèÈÅéÈè°È†≠ÔºåÊàëÂÄëÂ∞áÊçïÊçâ‰Ω†ÊúÄÊîæÈ¨Ü„ÄÅÊúÄÊ≤íÊúâÈò≤ÂÇôÁöÑÊôÇÂàª„ÄÇ",
                visual: "ÈÄÜÂÖâ‰∏ãÁöÑÂ±ÖÂÆ∂ÊÑü„ÄÇÂçàÂæåÂõõÈªûÁöÑÈáëÈªÉËâ≤ÈôΩÂÖâÁÅëËêΩÔºåÊâãÊçßÁÜ±ÂíñÂï°„ÄÇÈ´ÆÁµ≤Êüì‰∏äÈáëÈÇäÔºå‰Ω†ÁöÑÁúºÁ•ûÊ∫´ÊüîËÄåÊ∏ÖÊæà„ÄÇ",
                colors: ["#D4A373", "#FAEDCD"] 
            },
            7: {
                title: "THE ANALYST (Âì≤Â≠∏ÂÆ∂)",
                keywords: "#COOL #DEEP",
                desc: "‰Ω†ÁøíÊÖ£ÈÄèÈÅéÊÄùËÄÉ‰æÜÁêÜËß£‰∏ñÁïå„ÄÇ‰Ω†ÊìÅÊúâ‰∏ÄÁ®ÆÈ´òÊô∫ÊÑüÁöÑÂÜ∑ÈùúÔºå‰∏çÈö®Ê≥¢ÈÄêÊµÅ„ÄÇ‰Ω†ËøΩÊ±ÇÁöÑÊòØÊ∑±Â∫¶ÁöÑÂ∞çË©±ËàáÁç®ËôïÁöÑÂìÅË≥™„ÄÇ",
                reason: "ÈÄôÊòØ‰∏ÄÂÄãÂêëÂÖßÊé¢Á¥¢ÁöÑÈöéÊÆµ„ÄÇÈÄèÈÅéÂΩ±ÂÉèÔºåÊàëÂÄë‰∏çÂè™Ë¶ÅÊãç‰Ω†ÁöÑÂ§ñË°®ÔºåÊõ¥Ë¶ÅÊãçÂá∫‰Ω†ÈÇ£Á®Æ„ÄéÊ≠£Âú®Ëß£Êûê‰∏ñÁïå„ÄèÁöÑÊô∫ÊÄßÊ∞õÂúç„ÄÇ",
                visual: "ÂÜ∑Ëâ≤Ë™øÁöÑÊ•µÁ∞°ÊßãÂúñ„ÄÇÂà©Áî®ÁéªÁíÉÂèçÂ∞ÑÊàñÈè°ÂÉèÔºåÂâµÈÄ†Âá∫‰∏ÄÁ®ÆÊäΩÈõ¢ÁöÑË¶ñËßí„ÄÇËÅöÁÑ¶Âú®‰Ω†Ê≤âÊÄùÊôÇÁöÑÂÅ¥Ëáâ„ÄÇ",
                colors: ["#2C3E50", "#B0C4DE"] 
            },
            8: {
                title: "THE EXECUTIVE (Ê¨äÂ®ÅËÄÖ)",
                keywords: "#LUXURY #POWER",
                desc: "‰Ω†Â§©ÁîüÂ±¨ÊñºËàûÂè∞‰∏≠Â§ÆÔºåÊìÅÊúâÊéåÊéßÂÖ®Â±ÄÁöÑÊ∞£Â†¥„ÄÇ‰Ω†ËøΩÊ±ÇÂçìË∂äÔºå‰∫´ÂèóÊåëÊà∞„ÄÇ‰Ω†ÁöÑËá™‰ø°‰∏çÊòØÂÇ≤ÊÖ¢ÔºåËÄåÊòØÊ∫êÊñºÂ∞çËá™Ë∫´ÂØ¶ÂäõÁöÑÁµïÂ∞çÊéåÊéß„ÄÇ",
                reason: "‰Ω†ÈúÄË¶Å‰∏ÄÂºµËÉΩÂ§†ÈéÆÂæó‰ΩèÂ†¥Â≠êÁöÑ„ÄéÁéãÁâå„Äè„ÄÇÈÄôÁµÑÁÖßÁâáË¶ÅËÆì‰∫∫‰∏ÄÁúºÂ∞±ÊÑüÂèóÂà∞‰Ω†ÁöÑÂÉπÂÄºÊÑüËàá‰∏çÂèØÂøΩË¶ñÁöÑÂú∞‰Ωç„ÄÇ",
                visual: "ÂÄ´ÂãÉÊúóÂÖâ (Rembrandt Lighting) ÁöÑÂïÜÊ•≠Â§ßÁâáË≥™ÊÑü„ÄÇÊ∑±Ëâ≤ËÉåÊôØÔºåÂº∑Ë™øÊúçË£ùÁöÑË≥™ÊÑü„ÄÇÂùêÂßøÈú∏Ê∞£ÔºåÁúºÁ•ûÈä≥Âà©„ÄÇ",
                colors: ["#121212", "#B8860B"] 
            },
            9: {
                title: "THE HUMANITARIAN (ÂçöÊÑõËÄÖ)",
                keywords: "#ZEN #VAST",
                desc: "‰Ω†ÁöÑË¶ñÈáéÂÆèÂ§ßÔºåÈóúÊ≥®Êú¨Ë≥™ËàáÁúüÁêÜ„ÄÇÁãπÁ™ÑÁöÑÁ©∫ÈñìÁÑ°Ê≥ïÂÆπÁ¥ç‰Ω†ÁöÑÈùàÈ≠Ç„ÄÇ‰Ω†Êúâ‰∏ÄÁ®ÆË∂ÖËÑ´‰∏ñ‰øóÁöÑÁ©∫ÈùàÊ∞£Ë≥™„ÄÇ",
                reason: "ËÆìË∫´ÂøÉÂõûÊ≠∏Ëá™ÁÑ∂ÁöÑÊá∑Êä±„ÄÇÈÄôÁµÑÁÖßÁâáÊòØ‰∏ÄÂ†¥ÂÑÄÂºèÔºåËÆì‰Ω†Êö´ÊôÇËÑ´Èõ¢‰∏ñ‰øóÁöÑÁ¥õÊìæÔºåÂú®Âª£ÈóäÁöÑÂ§©Âú∞ÈñìÊâæÂõûÂÖßÂøÉÁöÑÂπ≥Èùú„ÄÇ",
                visual: "Ë∂ÖÂª£ËßíÂ§ßÊôØ„ÄÇÂ∞á‰∫∫Áâ©Á∏ÆÂ∞èÁΩÆÊñºÂ§ßËá™ÁÑ∂‰∏≠ÔºåÂ§ßÈáèÁïôÁôΩ„ÄÇÂº∑Ë™ø‰∫∫ËàáÁí∞Â¢ÉÁöÑÂíåË´ßÂÖ±Â≠òÔºåÁï´Èù¢ÂÖÖÊªø‰∫ÜÁ¶™ÊÑè„ÄÇ",
                colors: ["#4A5D46", "#DCDCDC"] 
            }
        };

        const questions = [
            {
                text: "Âú®‰∏ÄÂÄãÂÆåÂÖ®Ê≤íÊúâË°åÁ®ãÁöÑÈÄ±Êú´Ôºå‰Ω†ÊúÉÂ¶Ç‰ΩïÁÇ∫Ëá™Â∑±ÂÖÖÈõªÔºü",
                options: [
                    { text: "ÈÅ†Èõ¢‰∫∫Áæ§ÔºåÂéªÊµ∑ÈÇäÊàñÂ±±‰∏äÁúãËëóÈ¢®ÊôØÁôºÂëÜÔºåÊÑüÂèóÊ∏∫Â∞è„ÄÇ", scores: [9] },
                    { text: "Á™©Âú®Ê≤ôÁôº‰∏äÔºåÈªûÂÄãÈ¶ôÊ∞õÔºåËÆÄ‰∏ÄÊú¨Â•ΩÊõ∏ÊàñÁúãÈÉ®ËÄÅÈõªÂΩ±„ÄÇ", scores: [6, 2] },
                    { text: "ÂéªÊúÄÁÜ±È¨ßÁöÑË°óÂçÄÊàñÂ±ïË¶ΩÔºåÂ∞ãÊâæË¶ñË¶∫Âà∫ÊøÄËàáÈùàÊÑü„ÄÇ", scores: [3, 5] },
                    { text: "Êï¥ÁêÜÊàøÈñìÔºåË¶èÂäÉ‰∏ãÈÄ±ÁõÆÊ®ôÔºåÂú®Áß©Â∫è‰∏≠Áç≤ÂæóÂπ≥Èùú„ÄÇ", scores: [4, 1, 8] },
                    { text: "ÊâæÂÄãÂÆâÈùúÁöÑÂíñÂï°Âª≥ÔºåËßÄÂØüË∑Ø‰∫∫ÔºåÊÄùËÄÉ‰∫∫ÁîüÁöÑÂì≤Â≠∏ÂïèÈ°å„ÄÇ", scores: [7] }
                ]
            },
            {
                text: "Â¶ÇÊûú‰Ω†Ë¶ÅÈÅ∏‰∏ÄÂ•óÊúçË£ù‰æÜ‰ª£Ë°®‰ªäÂ§©ÁöÑÁãÄÊÖãÔºå‰Ω†ÊúÉÈÅ∏Ôºü",
                options: [
                    { text: "Ââ™Ë£ÅÊ•µÁ∞°ÁöÑÈªëËâ≤Á≥ªÔºå‰∏çÂõâÂîÜÔºåÊúâË≥™ÊÑü„ÄÇ", scores: [1, 7] },
                    { text: "‰∫ûÈ∫ª„ÄÅÊ£âË≥™Á≠âÂ§ßÂú∞Ëâ≤Á≥ªÔºåËàíÊúçÊúÄÈáçË¶Å„ÄÇ", scores: [2, 6, 9] },
                    { text: "Ëâ≤ÂΩ©ÈÆÆË±îÊàñÊúâÁç®ÁâπÂç∞Ëä±ÁöÑÂñÆÂìÅÔºåÊàëÊÉ≥Ë¢´ÁúãË¶ã„ÄÇ", scores: [3, 5] },
                    { text: "Ââ™Ë£ÅÂêàÂÆúÁöÑË•øË£ùÊàñÂ•óË£ùÔºåÂ±ïÁèæÂ∞àÊ•≠ËàáÊ∞£Âã¢„ÄÇ", scores: [4, 8] }
                ]
            },
            {
                text: "ÊúãÂèãÈÄöÂ∏∏ÊÄéÈ∫ºÂΩ¢ÂÆπ‰Ω†Áµ¶‰∫∫ÁöÑÁ¨¨‰∏ÄÂç∞Ë±°Ôºü",
                options: [
                    { text: "ÂæàÊúâÊ∞£Â†¥„ÄÅËá™‰ø°ÔºåÁîöËá≥ÊúâÈªûË∑ùÈõ¢ÊÑü„ÄÇ", scores: [1, 8] },
                    { text: "Ê∫´Êüî„ÄÅÂ•ΩÁõ∏ËôïÔºåÊòØÂæàÊ£íÁöÑÂÇæËÅΩËÄÖ„ÄÇ", scores: [2, 6] },
                    { text: "ÂæàÁâπÂà•„ÄÅÊçâÊë∏‰∏çÂÆöÔºåÂæàÊúâËóùË°ìÂÆ∂Ê∞£ÊÅØ„ÄÇ", scores: [3, 5] },
                    { text: "ÂæàÁêÜÊÄß„ÄÅÂÜ∑ÈùúÔºåË¨õË©±ÂæàÊúâÈÇèËºØ„ÄÇ", scores: [7, 4] },
                    { text: "Âæà‰ΩõÁ≥ª„ÄÅÈö®ÂíåÔºåÂ•ΩÂÉè‰ªÄÈ∫ºÈÉΩ‰∏çË®àËºÉ„ÄÇ", scores: [9] }
                ]
            },
            {
                text: "‰Ω†ÂøÉ‰∏≠ÁêÜÊÉ≥ÁöÑ„ÄåÁæé„ÄçÔºåÊúÄÊé•Ëøë‰∏ãÂàóÂì™Á®ÆÁï´Èù¢Ôºü",
                options: [
                    { text: "Â∞çÁ®±ÁöÑÂπæ‰ΩïÁ∑öÊ¢ùÔºåÂÆåÁæéÁöÑÂÖâÂΩ±ÁµêÊßã„ÄÇ", scores: [4, 1] },
                    { text: "ÊµÅÂãïÁöÑÁû¨ÈñìÔºåÊ®°Á≥äÂçªÂÖÖÊªøÊÉÖÁ∑íÂºµÂäõ„ÄÇ", scores: [3, 5] },
                    { text: "Ê∫´ÊöñÁöÑÈôΩÂÖâÁÅëÂú®Êú®Âú∞Êùø‰∏äÔºåÊ≠≤ÊúàÈùúÂ•Ω„ÄÇ", scores: [6, 2] },
                    { text: "ÂÆèÂÅâÂ£ØÈóäÁöÑÂ§ßËá™ÁÑ∂Ôºå‰∫∫È°ûÈ°ØÂæóÂæàÊ∏∫Â∞è„ÄÇ", scores: [9] },
                    { text: "Á≤æÁ∑ªÂ•¢ËèØÁöÑÁ¥∞ÁØÄÔºåÈáëÁ¢ßËºùÁÖåÁöÑË≥™ÊÑü„ÄÇ", scores: [8] }
                ]
            },
            {
                text: "Â¶ÇÊûúË¶ÅÊãç‰∏ÄÁµÑÁÖßÁâáÔºå‰Ω†ÂÖßÂøÉÊ∑±ËôïÊúÄÊ∏¥ÊúõÂ±ïÁèæÁöÑÊòØÔºü",
                options: [
                    { text: "ÊàëÁöÑÂ∞àÊ•≠ËàáÊàêÂäüÔºåÊàëÊÉ≥ÁúãËµ∑‰æÜÂæàÂº∑„ÄÇ", scores: [8, 4] },
                    { text: "ÊàëÁúüÂØ¶ÁöÑÊÉÖÁ∑íÔºåÂø´Ê®ÇÊàñÊÜÇÂÇ∑ÈÉΩ‰∏çÊé©È£æ„ÄÇ", scores: [3, 5] },
                    { text: "ÊàëÊúÄÊîæÈ¨Ü„ÄÅÊúÄËá™ÁÑ∂ÁöÑÊ®£Â≠êÔºå‰∏çË¶ÅÊì∫Êãç„ÄÇ", scores: [6, 2, 9] },
                    { text: "ÊàëÁç®ÁâπÁöÑÊÄùÊÉ≥ËàáÈùàÈ≠ÇÔºåÈÇ£Á®ÆÁ•ûÁ•ïÁöÑÊ∞õÂúç„ÄÇ", scores: [7, 1] }
                ]
            }
        ];

        let currentQuestion = 0;
        let scores = {1:0, 2:0, 3:0, 4:0, 5:0, 6:0, 7:0, 8:0, 9:0};
        let userData = {};

        function startQuiz() {
            const name = document.getElementById('userName').value;
            const date = document.getElementById('userDate').value;
            const ig = document.getElementById('userIG').value;
            const city = document.getElementById('userCity').value;
            const gender = document.getElementById('userGender').value;
            
            if(!name || !date || !ig) {
                alert("Ë´ãÂ°´ÂØ´ÂßìÂêç„ÄÅÁîüÊó•Ëàá IG (ÂøÖÂ°´) ‰ª•Âª∫Á´ãÊ™îÊ°à„ÄÇ");
                return;
            }
            userData = { name, date, ig, city, gender };

            // Formspree Integration (Data Collection)
            fetch("https://formspree.io/f/mjgkllab", {
                method: "POST",
                headers: { "Content-Type": "application/json", "Accept": "application/json" },
                body: JSON.stringify({
                    name: name, birthday: date, gender: gender, instagram: ig, city: city, 
                    type: "Visual Oracle Entry", status: "Casting Pool Candidate", timestamp: new Date().toISOString()
                })
            });

            document.getElementById('phase-identity').classList.add('hidden');
            document.getElementById('phase-quiz').classList.remove('hidden');
            renderQuestion();
        }

        function renderQuestion() {
            const q = questions[currentQuestion];
            document.getElementById('questionNumber').innerText = `0${currentQuestion + 1}`;
            document.getElementById('questionText').innerText = q.text;
            
            const container = document.getElementById('optionsContainer');
            container.innerHTML = '';

            q.options.forEach(opt => {
                const btn = document.createElement('button');
                btn.className = 'option-btn';
                btn.innerText = opt.text;
                btn.onclick = () => selectOption(opt.scores);
                container.appendChild(btn);
            });
        }

        function selectOption(points) {
            points.forEach(id => { scores[id] += 1; });
            if (currentQuestion < questions.length - 1) {
                currentQuestion++;
                renderQuestion();
            } else {
                finishQuiz();
            }
        }

        function finishQuiz() {
            document.getElementById('phase-quiz').classList.add('hidden');
            document.getElementById('phase-loading').classList.remove('hidden');

            let maxScore = -1;
            let winningId = 1;
            for (const [id, score] of Object.entries(scores)) {
                if (score > maxScore) {
                    maxScore = score;
                    winningId = id;
                } else if (score === maxScore) {
                    if (Math.random() > 0.5) winningId = id;
                }
            }

            setTimeout(() => { showResult(winningId); }, 2000);
        }

        function showResult(id) {
            const data = archetypes[id];
            const parts = data.title.split(' (');
            
            document.getElementById('resName').innerText = userData.name;
            document.getElementById('resDate').innerText = new Date().toISOString().split('T')[0].replace(/-/g, '.');
            document.getElementById('resNum').innerText = `00${id}`;
            document.getElementById('resIG').innerText = userData.ig;
            document.getElementById('resCity').innerText = userData.city.toUpperCase();
            document.getElementById('resGender').innerText = userData.gender === 'Female' ? 'F' : (userData.gender === 'Male' ? 'M' : 'X');

            document.getElementById('resTitleEn').innerText = parts[0];
            document.getElementById('resTitleZh').innerText = parts[1].replace(')', '');
            document.getElementById('resKeywords').innerText = data.keywords;
            document.getElementById('resDesc').innerText = data.desc;
            document.getElementById('resReason').innerText = data.reason;
            document.getElementById('resVisual').innerText = data.visual;

            const colorBox = document.getElementById('resColors');
            colorBox.innerHTML = '';
            
            const color1 = document.createElement('div');
            color1.className = 'duo-swatch';
            color1.style.width = '65%';
            color1.style.backgroundColor = data.colors[0];
            color1.innerHTML = `<span class="color-label">${data.colors[0]}</span>`;
            colorBox.appendChild(color1);

            const color2 = document.createElement('div');
            color2.className = 'duo-swatch';
            color2.style.width = '35%';
            color2.style.backgroundColor = data.colors[1];
            color2.innerHTML = `<span class="color-label">${data.colors[1]}</span>`;
            colorBox.appendChild(color2);

            document.getElementById('phase-loading').classList.add('hidden');
            document.getElementById('phase-result').classList.remove('hidden');
        }

        function downloadCard() {
            const card = document.getElementById('captureArea');
            card.classList.remove('shadow-2xl');
            
            html2canvas(card, {
                backgroundColor: "#050505",
                scale: 2,
                useCORS: true
            }).then(canvas => {
                const link = document.createElement('a');
                link.download = `EDEN_DNA_${userData.name}.png`;
                link.href = canvas.toDataURL();
                link.click();
                
                card.classList.add('shadow-2xl');
                alert("Ê™îÊ°àÂ∑≤‰øùÂ≠ò„ÄÇË´ãÁßÅË®ä EDEN ÂÆòÊñπÂ∏≥Ëôü‰ª•ÂÆåÊàê‰∫íÊÉ†ÂÇôÂèñÁ¢∫Ë™ç„ÄÇ");
                window.open('https://www.instagram.com/eden_d_photo/', '_blank');
            });
        }
    </script>
</body>
</html>
