<!DOCTYPE html>
<html lang="zh-TW">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Visual Oracle | EDEN LAB</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://html2canvas.hertzen.com/dist/html2canvas.min.js"></script>
    <link href="https://fonts.googleapis.com/css2?family=Cinzel:wght@400;700&family=Space+Mono:ital,wght@0,400;1,400&display=swap" rel="stylesheet">
    
    <script>
        tailwind.config = {
            theme: {
                extend: {
                    fontFamily: { serif: ['Cinzel', 'serif'], mono: ['Space Mono', 'monospace'] },
                    colors: { eden: { dark: '#0a0a0a', gold: '#BF953F', glass: 'rgba(20, 20, 20, 0.95)' } },
                    animation: { 
                        'float': 'float 6s ease-in-out infinite',
                        'fade-in': 'fadeIn 0.8s ease-out',
                        'pulse-slow': 'pulse 4s cubic-bezier(0.4, 0, 0.6, 1) infinite'
                    },
                    keyframes: {
                        float: { '0%, 100%': { transform: 'translateY(0)' }, '50%': { transform: 'translateY(-10px)' } },
                        fadeIn: { '0%': { opacity: '0', transform: 'translateY(10px)' }, '100%': { opacity: '1', transform: 'translateY(0)' } }
                    }
                }
            }
        }
    </script>

    <style>
        body { background-color: #050505; color: #e2e8f0; overflow-x: hidden; }
        .bg-noise { position: fixed; top: 0; left: 0; width: 100%; height: 100%; opacity: 0.04; pointer-events: none; z-index: 0; filter: contrast(300%); background: url("data:image/svg+xml,%3Csvg viewBox='0 0 200 200' xmlns='http://www.w3.org/2000/svg'%3E%3Cfilter id='noiseFilter'%3E%3CfeTurbulence type='fractalNoise' baseFrequency='0.8' numOctaves='3' stitchTiles='stitch'/%3E%3C/filter%3E%3Crect width='100%25' height='100%25' filter='url(%23noiseFilter)' opacity='1'/%3E%3C/svg%3E"); }
        
        /* ÁéªÁíÉË≥™ÊÑü */
        .glass-panel { background: rgba(30, 30, 30, 0.6); backdrop-filter: blur(12px); border: 1px solid rgba(255, 255, 255, 0.08); box-shadow: 0 20px 40px rgba(0,0,0,0.6); }
        .input-field { background: rgba(0,0,0,0.4); border: 1px solid #333; color: #fff; transition: 0.3s; text-align: center; font-family: 'Space Mono', monospace; }
        .input-field:focus { border-color: #BF953F; outline: none; background: rgba(191, 149, 63, 0.05); }
        
        /* ÈÅ∏ÂñÆÊ®£ÂºèÂÑ™Âåñ */
        select.input-field { appearance: none; -webkit-appearance: none; }

        /* ÈáëËâ≤ÊåâÈàï */
        .btn-gold { background: linear-gradient(to bottom, #BF953F, #9e7b30); color: #000; font-weight: 700; letter-spacing: 0.15em; transition: 0.3s; box-shadow: 0 4px 15px rgba(191, 149, 63, 0.2); border: none; }
        .btn-gold:hover { transform: translateY(-2px); box-shadow: 0 6px 20px rgba(191, 149, 63, 0.4); filter: brightness(1.1); }
        
        /* Âç°ÁâåÊ®£Âºè */
        .card-grid { display: grid; grid-template-columns: repeat(3, 1fr); gap: 10px; max-width: 320px; margin: 0 auto; }
        .card-container { perspective: 1000px; cursor: pointer; height: 140px; width: 100%; }
        .card-inner { position: relative; width: 100%; height: 100%; text-align: center; transition: transform 0.6s cubic-bezier(0.2, 0.8, 0.2, 1); transform-style: preserve-3d; }
        .card-container:hover .card-inner { transform: translateY(-5px); }
        .card-container.flipped .card-inner { transform: rotateY(180deg); }
        
        .card-front, .card-back { position: absolute; width: 100%; height: 100%; -webkit-backface-visibility: hidden; backface-visibility: hidden; border-radius: 8px; border: 1px solid #444; box-shadow: 0 5px 15px rgba(0,0,0,0.5); }
        .card-front { background: #111; background-image: radial-gradient(circle at center, #222 1px, transparent 1px); background-size: 10px 10px; display: flex; align-items: center; justify-content: center; border: 1px solid #333; }
        .card-back { background: #080808; transform: rotateY(180deg); border: 1px solid #BF953F; }

        /* Á•®Âà∏Ê®£Âºè (Ticket) */
        .ticket-visual { 
            background: #111; 
            border: 1px solid #BF953F; 
            position: relative; 
            overflow: hidden;
            background-image: url("data:image/svg+xml,%3Csvg width='100' height='100' viewBox='0 0 100 100' xmlns='http://www.w3.org/2000/svg'%3E%3Cpath d='M11 18c3.866 0 7-3.134 7-7s-3.134-7-7-7-7 3.134-7 7 3.134 7 7 7zm48 25c3.866 0 7-3.134 7-7s-3.134-7-7-7-7 3.134-7 7 3.134 7 7 7zm-43-7c1.657 0 3-1.343 3-3s-1.343-3-3-3-3 1.343-3 3 1.343 3 3 3zm63 31c1.657 0 3-1.343 3-3s-1.343-3-3-3-3 1.343-3 3 1.343 3 3 3zM34 90c1.657 0 3-1.343 3-3s-1.343-3-3-3-3 1.343-3 3 1.343 3 3 3zm56-76c1.657 0 3-1.343 3-3s-1.343-3-3-3-3 1.343-3 3 1.343 3 3 3zM12 86c2.21 0 4-1.79 4-4s-1.79-4-4-4-4 1.79-4 4 1.79 4 4 4zm28-65c2.21 0 4-1.79 4-4s-1.79-4-4-4-4 1.79-4 4 1.79 4 4 4zm23-11c2.76 0 5-2.24 5-5s-2.24-5-5-5-5 2.24-5 5 2.24 5 5 5zm-6 60c2.21 0 4-1.79 4-4s-1.79-4-4-4-4 1.79-4 4 1.79 4 4 4zm29 22c2.76 0 5-2.24 5-5s-2.24-5-5-5-5 2.24-5 5 2.24 5 5 5zM32 63c2.76 0 5-2.24 5-5s-2.24-5-5-5-5 2.24-5 5 2.24 5 5 5zm57-13c2.76 0 5-2.24 5-5s-2.24-5-5-5-5 2.24-5 5 2.24 5 5 5zm-9-21c1.105 0 2-.895 2-2s-.895-2-2-2-2 .895-2 2 .895 2 2 2zM60 91c1.105 0 2-.895 2-2s-.895-2-2-2-2 .895-2 2 .895 2 2 2zM35 41c1.105 0 2-.895 2-2s-.895-2-2-2-2 .895-2 2 .895 2 2 2zM12 60c1.105 0 2-.895 2-2s-.895-2-2-2-2 .895-2 2 .895 2 2 2z' fill='%23bf953f' fill-opacity='0.05' fill-rule='evenodd'/%3E%3C/svg%3E");
        }
        .ticket-rip { border-top: 2px dashed #333; margin: 15px 0; position: relative; }
        .ticket-rip::before, .ticket-rip::after { content: ''; position: absolute; top: -10px; width: 20px; height: 20px; background: #050505; border-radius: 50%; }
        .ticket-rip::before { left: -25px; }
        .ticket-rip::after { right: -25px; }

        .toast { position: fixed; bottom: 30px; left: 50%; transform: translateX(-50%); background: #BF953F; color: #000; padding: 10px 20px; border-radius: 30px; font-weight: bold; font-size: 12px; opacity: 0; transition: 0.3s; pointer-events: none; z-index: 50; box-shadow: 0 5px 15px rgba(0,0,0,0.5); }
        .toast.show { opacity: 1; bottom: 50px; }
    </style>
</head>
<body class="flex flex-col items-center min-h-screen font-sans selection:bg-[#BF953F] selection:text-black pb-20">

    <div class="bg-noise"></div>

    <header class="relative z-10 w-full flex justify-center py-8 fade-in">
        <div class="text-center">
            <a href="index.html" class="block text-[10px] tracking-[0.3em] text-gray-500 hover:text-[#BF953F] mb-2 transition-colors">‚Üê EDEN LAB</a>
            <h1 class="font-serif text-[#BF953F] text-xl tracking-widest">VISUAL ORACLE</h1>
        </div>
    </header>

    <main class="relative z-10 w-full max-w-md px-6">
        
        <div id="step1" class="animate-fade-in text-center">
            <h2 class="font-serif text-2xl text-white mb-2">Energy Calibration</h2>
            <p class="text-gray-400 text-xs mb-8 font-mono">Ëº∏ÂÖ•Ë≥áÊñôÔºåÊ†°Ê∫ñ‰Ω†ÁöÑÁæéÂ≠∏È†ªÁéá</p>
            
            <div class="glass-panel p-8 rounded-xl space-y-5">
                <div class="text-left">
                    <label class="text-[10px] text-[#BF953F] tracking-widest block mb-1">NAME</label>
                    <input type="text" id="userName" class="input-field w-full p-3 rounded text-sm" placeholder="Ëº∏ÂÖ•ÂßìÂêçÊàñÊö±Á®±">
                </div>

                <div class="flex gap-4">
                    <div class="w-2/3 text-left">
                        <label class="text-[10px] text-[#BF953F] tracking-widest block mb-1">DATE OF BIRTH</label>
                        <input type="date" id="userDate" class="input-field w-full p-3 rounded text-xs uppercase">
                    </div>
                    <div class="w-1/3 text-left">
                        <label class="text-[10px] text-[#BF953F] tracking-widest block mb-1">GENDER</label>
                        <select id="userGender" class="input-field w-full p-3 rounded text-xs">
                            <option value="F">Female</option>
                            <option value="M">Male</option>
                            <option value="X">Other</option>
                        </select>
                    </div>
                </div>

                <div class="text-left">
                    <label class="text-[10px] text-[#BF953F] tracking-widest block mb-1">QUERY FOCUS</label>
                    <select id="userQuery" class="input-field w-full p-3 rounded text-xs">
                        <option value="CAREER">‰∫ãÊ•≠ (Professional Image)</option>
                        <option value="LOVE">ÊÑüÊÉÖ (Attraction & Vibes)</option>
                        <option value="SOCIAL">‰∫∫Èöõ (Social Charisma)</option>
                        <option value="WEALTH">Ë≤°ÂØå (Wealth Aura)</option>
                        <option value="GROWTH">ÊàêÈï∑ (Self Actualization)</option>
                    </select>
                </div>

                <button onclick="goToDeck()" class="btn-gold w-full py-3 rounded text-xs mt-4">INITIATE RITUAL</button>
            </div>
        </div>

        <div id="step2" class="hidden text-center w-full">
            <h2 class="font-serif text-2xl text-white mb-2 animate-pulse-slow">The Manifestation</h2>
            <p class="text-gray-400 text-xs mb-8 font-mono">Ê∑±ÂëºÂê∏ÔºåÂ∞àÊ≥®‰Ω†ÁöÑÂïèÈ°åÔºåÊÜëÁõ¥Ë¶∫ÈªûÈÅ∏‰∏ÄÂºµÁâå</p>
            
            <div class="card-grid" id="cardGrid">
                </div>
        </div>

        <div id="step3" class="hidden animate-fade-in space-y-6">
            
            <div class="glass-panel p-0 rounded-xl overflow-hidden">
                <div class="bg-[#0f0f0f] p-6 text-center border-b border-[#333] relative">
                    <div class="absolute top-0 left-0 w-full h-1 bg-[#BF953F] opacity-50"></div>
                    <div class="text-[10px] text-[#BF953F] tracking-[0.2em] mb-2 uppercase">Archetype Revealed</div>
                    <h2 id="cardTitle" class="font-serif text-2xl text-white mb-1"></h2>
                    <p id="cardKeywords" class="font-mono text-[10px] text-gray-500 border border-gray-800 inline-block px-2 py-1 mt-2 rounded"></p>
                </div>

                <div class="p-8 space-y-8">
                    
                    <div>
                        <h3 class="font-serif text-[#BF953F] text-sm mb-3">‚ú¶ ORACLE READING</h3>
                        <p id="oracleText" class="text-sm text-gray-300 leading-relaxed text-justify font-light"></p>
                    </div>

                    <div class="bg-[#151515] p-5 rounded border-l-2 border-[#BF953F]">
                        <h3 class="font-serif text-[#BF953F] text-sm mb-2 flex items-center gap-2">
                            <span class="text-lg">üëÅ</span> VISUAL MANIFESTATION
                        </h3>
                        <p id="cardAdvice" class="text-xs text-gray-400 font-mono leading-relaxed italic"></p>
                    </div>

                    <div>
                        <h3 class="font-serif text-white text-xs mb-3 tracking-widest opacity-60">LUCKY PALETTE</h3>
                        <div class="grid grid-cols-4 gap-2 h-10" id="colorContainer">
                            </div>
                    </div>
                </div>
            </div>

            <button onclick="generateTicket()" class="btn-gold w-full py-4 rounded text-xs tracking-widest">
                GENERATE DIGITAL PASS (ÁîüÊàêÁ•®Âà∏)
            </button>
            
            <button onclick="resetDraw()" class="w-full text-[10px] text-gray-500 hover:text-white tracking-widest py-3 border border-gray-800 rounded">
                ‚Ü∫ RESHUFFLE (ÈáçÊñ∞ÊÑüÊáâ)
            </button>
        </div>

        <div id="step4" class="hidden animate-fade-in flex flex-col items-center">
            <h2 class="font-serif text-xl text-white mb-4">Your Style Pass</h2>
            
            <div id="ticketArea" class="ticket-visual w-full max-w-sm p-6 rounded-sm mb-6 text-center">
                <div class="flex justify-between items-center border-b border-[#333] pb-4 mb-4">
                    <span class="font-serif text-[#BF953F] tracking-widest text-sm">EDEN LAB</span>
                    <span class="font-mono text-[10px] text-gray-500" id="ticketDate">2026.01.01</span>
                </div>
                
                <h3 id="ticketName" class="font-serif text-2xl text-white uppercase mb-1">USER NAME</h3>
                <p id="ticketArchetype" class="font-mono text-xs text-[#BF953F] mb-4">THE PIONEER</p>
                
                <div class="ticket-rip"></div>
                
                <div class="space-y-2">
                    <p class="text-[10px] text-gray-500 tracking-[0.2em] uppercase">ACCESS CODE</p>
                    <div class="font-mono text-xl text-white border border-[#BF953F] inline-block px-4 py-2 tracking-widest">EDEN_ORACLE</div>
                    <p class="text-[9px] text-gray-400 mt-2">ÊÜëÊ≠§Âà∏Êà™ÂúñÈ†êÁ¥Ñ EDEN ÊîùÂΩ±Ôºå‰∫´Â∞àÂ±¨ÊñπÊ°àÊäòÊâ£</p>
                </div>

                <div class="mt-6 pt-4 border-t border-[#333] flex justify-between items-end">
                    <div class="text-left">
                        <p class="text-[8px] text-gray-600">QUERY FOCUS</p>
                        <p id="ticketQuery" class="text-[10px] text-gray-400">CAREER</p>
                    </div>
                    <div class="text-right">
                        <p class="text-[8px] text-gray-600">LUCKY COLOR</p>
                        <div id="ticketColor" class="w-4 h-4 rounded-full bg-white ml-auto"></div>
                    </div>
                </div>
            </div>

            <button onclick="downloadTicket()" class="btn-gold w-full py-3 rounded text-xs tracking-widest mb-3">
                SAVE TICKET (ÂÑ≤Â≠òÊà™Âúñ)
            </button>
            
            <a href="https://www.instagram.com/eden_d_photo/" target="_blank" class="block w-full text-center text-xs text-[#BF953F] border border-[#BF953F] py-3 rounded hover:bg-[#BF953F] hover:text-black transition-colors">
                BOOK WITH TICKET ‚Üó
            </a>
        </div>

    </main>

    <div id="toast" class="toast">COLOR COPIED</div>

    <script>
        // --- 9Â§ßÁæéÂ≠∏ÂéüÂûã & Á•ûË´≠Ë≥áÊñôÂ∫´ ---
        // Áï´Èù¢ÊÉ≥ÂÉè (Visual Imagery) + ÂéüÂûãË≥áÊñô
        const archetypes = [
            {
                id: 1, title: "THE PIONEER (ÈñãÂâµËÄÖ)", keywords: "#MINIMAL #SHARP",
                visual: "ÊÉ≥ÂÉè‰Ω†ÁΩÆË∫´Êñº‰∏ÄÂÄãÂ∑®Â§ßÁöÑÊ∏ÖÊ∞¥Ê®°Á©∫ÈñìÔºåÂè™Êúâ‰∏ÄÈÅìÈä≥Âà©ÁöÑÁ°¨ÂÖâ (Hard Light) Âæû‰∏äÊñπÊâì‰∏ã„ÄÇ‰Ω†Á©øËëóÊ•µÁ∞°ÁöÑÈªëËâ≤È´òÈ†òÔºå‰∏çÈúÄË¶ÅÂ§öÈ§òÁöÑÂãï‰ΩúÔºåÂè™Ë¶Å‰∏ÄÂÄãÂ†ÖÂÆöÁöÑÁúºÁ•ûÁõ¥Ë¶ñÈè°È†≠„ÄÇÂë®ÂúçÊòØÁµïÂ∞çÁöÑÂØÇÈùúÔºå‰Ω†ÊòØÂîØ‰∏ÄÁöÑÁÑ¶Èªû„ÄÇ",
                colors: ["#000000", "#FFFFFF", "#333333", "#BF953F"]
            },
            {
                id: 2, title: "THE DIPLOMAT (ÂçîË™øËÄÖ)", keywords: "#SOFT #FLOW",
                visual: "ÊÉ≥ÂÉèÂçàÂæå‰∏âÈªûÁöÑÈôΩÂÖâÈÄèÈÅéÁôΩËâ≤Á¥óÁ∞æÁÅëÈÄ≤‰æÜÔºåÁ©∫Ê∞£‰∏≠ÊºÇÊµÆËëóÁ¥∞ÂæÆÁöÑÂ°µÂüÉ„ÄÇ‰Ω†Ë∫´Á©ø‰∫ûÈ∫ªÊùêË≥™ÁöÑÊúçË£ùÔºåÈö®ÊÑèÂú∞ÂùêÂú®ÂéüÊú®Âú∞Êùø‰∏ä„ÄÇÈè°È†≠ÈÄèÈÅéÂâçÊôØÁöÑÊ§çÁâ©Á™∫Ë¶ñ‰Ω†ÔºåÊçïÊçâ‰Ω†‰∏çÁ∂ìÊÑè‰ΩéÈ†≠ÊôÇÔºåÂÖâÂΩ±Âú®ËáâÈæê‰∏äÊ∫´ÊüîÁöÑÈÅéÊ∏°„ÄÇ",
                colors: ["#D7D0C8", "#A6A29A", "#8C8680", "#EAE6E1"]
            },
            {
                id: 3, title: "THE ARTIST (ËóùË°ìÂÆ∂)", keywords: "#DRAMA #NEON",
                visual: "ÊÉ≥ÂÉèÂ§úÊôöÁöÑÂüéÂ∏ÇÈúìËôπÂÄíÊò†Âú®Èõ®ÂæåÁöÑÊüèÊ≤πË∑Ø‰∏ä„ÄÇ‰Ω†Á´ôÂú®Á¥ÖËóç‰∫§ÈåØÁöÑÂÖâÂΩ±‰∏≠ÔºåÂõûÁú∏ÁöÑ‰∏ÄÁû¨ÈñìÔºå‰∏ñÁïåÁÇ∫‰∫Ü‰Ω†ËÄåÊÖ¢Âãï‰ΩúÊ®°Á≥ä„ÄÇÈÄô‰∏çÊòØ‰∏ÄÂºµÈùúÊ≠¢ÁöÑÁÖßÁâáÔºåÈÄôÊòØ‰∏ÄÂπÄÁéãÂÆ∂Ë°õÈõªÂΩ±ÁöÑÂÆöÊ†ºÔºåÂÖÖÊªø‰∫ÜÊÉÖÁ∑íÁöÑÂºµÂäõ„ÄÇ",
                colors: ["#FF3366", "#3300FF", "#00FFCC", "#111111"]
            },
            {
                id: 4, title: "THE BUILDER (Âª∫ÊßãËÄÖ)", keywords: "#ORDER #STRUCTURE",
                visual: "ÊÉ≥ÂÉè‰Ω†Á´ôÂú®ÂÆèÂÅâÁöÑÂè§ÂÖ∏Âª∫ÁØâÂâçÔºåÂ∑®Â§ßÁöÑÁü≥Êü±ËàáÂπæ‰ΩïÁ∑öÊ¢ùÊßãÊàê‰∫ÜÂÆåÁæéÁöÑÂ∞çÁ®±ËÉåÊôØ„ÄÇ‰Ω†Á©øËëóÂâ™Ë£ÅÂêàÂÆúÁöÑË•øË£ùÔºåÈõôÊâãÊèíÂè£Ë¢ãÔºåË∫´È´îÁ´ôÂæóÁ≠ÜÁõ¥„ÄÇÁï´Èù¢‰∏≠ÊØè‰∏ÄÊ¢ùÁ∑öÈÉΩÊåáÂêë‰Ω†ÔºåÂ±ïÁèæÂá∫‰∏ÄÁ®Æ‰∏çÂèØÊíºÂãïÁöÑÁ©©ÂÆöËàáÊ¨äÂ®Å„ÄÇ",
                colors: ["#1C2331", "#8B0000", "#F5F5F5", "#2F4F4F"]
            },
            {
                id: 5, title: "THE EXPLORER (Êé¢Á¥¢ËÄÖ)", keywords: "#FREE #WILD",
                visual: "ÊÉ≥ÂÉè‰Ω†Âú®È¢®Â§ßÁöÑÈ†ÇÊ®ìÂ§©Âè∞ÔºåÊàñËÄÖÊòØÂÖÖÊªøÂ°óÈ¥âÁöÑÂ∑•Ê•≠Âª¢Â¢ü„ÄÇÂª£ËßíÈè°È†≠Ë≤ºËøë‰Ω†ÔºåÊçïÊçâ‰Ω†È´ÆÁµ≤È£õÊèö„ÄÅÂ§ßÁ¨ëÊàñÊòØÂ•îË∑ëÁöÑÁû¨Èñì„ÄÇÊ≤íÊúâÂõ∫ÂÆöÁöÑÂßøÂã¢ÔºåÂè™ÊúâÊµÅÂãïÁöÑÁîüÂëΩÂäõÔºåËàá‰∏çË¢´ÊãòÊùüÁöÑÈùàÈ≠Ç„ÄÇ",
                colors: ["#FF4500", "#2F4F4F", "#708090", "#F0E68C"]
            },
            {
                id: 6, title: "THE HEALER (ÁôÇÁôíËÄÖ)", keywords: "#WARM #HOME",
                visual: "ÊÉ≥ÂÉèÊâãË£°ÊçßËëó‰∏ÄÊùØÁÜ±ÂíñÂï°ÔºåË∫´ÈÇäÂúçÁπûËëóÁ∂†Ëâ≤Ê§çÊ†ΩËàáÊõ∏Êú¨„ÄÇÊöñÈªÉËâ≤ÁöÑÈÄÜÂÖâÂãæÂãíÂá∫‰Ω†ÁöÑËº™ÂªìÈáëÈÇä„ÄÇÈÄô‰∏çÊòØÊì∫ÊãçÔºåËÄåÊòØÁ¥ÄÈåÑ‰Ω†ÊúÄÊîæÈ¨Ü„ÄÅÊúÄÊ≤íÊúâÈò≤ÂÇôÁöÑÂ±ÖÂÆ∂ÊôÇÂàª„ÄÇÁï´Èù¢ÂÇ≥ÈÅûÂá∫ÁöÑÊ∫´Â∫¶ÔºåËÆì‰∫∫Áúã‰∏ÄÁúºÂ∞±ÊÉ≥Èù†Ëøë„ÄÇ",
                colors: ["#FFD700", "#FFA07A", "#8B4513", "#FFF8DC"]
            },
            {
                id: 7, title: "THE ANALYST (Âì≤Â≠∏ÂÆ∂)", keywords: "#COOL #ABSTRACT",
                visual: "ÊÉ≥ÂÉè‰∏ÄÂÄãÂÖÖÊªøÁéªÁíÉËàáÈáëÂ±¨ÁöÑÂÜ∑Ëâ≤Ë™øÁ©∫Èñì„ÄÇÊàëÂÄë‰∏çÊãç‰Ω†ÁöÑÂÖ®ËáâÔºåËÄåÊòØÈÄèÈÅéÈè°Èù¢ÂèçÂ∞ÑÔºåÊàñÊòØËÅöÁÑ¶Âú®‰Ω†ÊãøËëóÁúºÈè°ÁöÑÊâãÈÉ®ÁâπÂØ´„ÄÇËóçÁÅ∞Ëâ≤ÁöÑËâ≤Ë™øÔºåÂ±ïÁèæÂá∫‰∏ÄÁ®ÆÂÜ∑Èùú„ÄÅÊäΩÈõ¢ÔºåÂΩ∑ÂΩøÊ≠£Âú®ÈÄèÈÅéÈè°È†≠Ëß£Êûê‰∏ñÁïåÁöÑÊô∫ÊÄßÁæé„ÄÇ",
                colors: ["#000080", "#778899", "#C0C0C0", "#E0FFFF"]
            },
            {
                id: 8, title: "THE EXECUTIVE (Ê¨äÂ®ÅËÄÖ)", keywords: "#LUXURY #CLASSIC",
                visual: "ÊÉ≥ÂÉè‰Ω†ÂùêÂú®Ê∑±Ëâ≤ÁöÑÁµ≤Áµ®Ê≤ôÁôº‰∏äÔºåËÉåÊôØÊòØÊöóË™øÁöÑÊ°ÉËä±ÂøÉÊú®„ÄÇ‰∏ÄÊùüÁ≤æÁ∑ªÁöÑÂÄ´ÂãÉÊúóÂÖâ (Rembrandt Light) Èªû‰∫Æ‰Ω†ÁöÑËáâÈæê‰∏âËßíÂçÄ„ÄÇÁï´Èù¢ÂÖÖÊªø‰∫ÜÊ≤πÁï´Ëà¨ÁöÑÂéöÈáçË≥™ÊÑüÔºåÊØè‰∏ÄÂÄãÁ¥∞ÁØÄÈÉΩÂú®Ë®¥Ë™™Ëëó„ÄåÂÉπÂÄº„ÄçËàá„ÄåÂú∞‰Ωç„Äç„ÄÇ",
                colors: ["#000000", "#DAA520", "#800000", "#4B0082"]
            },
            {
                id: 9, title: "THE HUMANITARIAN (ÂçöÊÑõËÄÖ)", keywords: "#ZEN #NATURE",
                visual: "ÊÉ≥ÂÉè‰∏ÄÁâáÁÑ°ÈÇäÈöõÁöÑÊµ∑ÁÅòÊàñËçâÂéüÔºåÂ§©Á©∫‰ΩîÊìö‰∫ÜÁï´Èù¢ÁöÑ‰∏âÂàÜ‰πã‰∫å„ÄÇ‰Ω†Âè™ÊòØ‰∏ÄÂÄãÂ∞èÂ∞èÁöÑÂâ™ÂΩ±ÔºåËàáÂ§©Âú∞ËûçÁÇ∫‰∏ÄÈ´î„ÄÇÁï´Èù¢Â§ßÈáèÁïôÁôΩÔºåÊ≤íÊúâÂ§öÈ§òÁöÑÈõúË®äÔºåÂè™Êúâ‰∏ÄÁ®ÆÊ•µËá¥ÁöÑÂØßÈùúËàáÁ¶™ÊÑèÔºåÂΩ∑ÂΩøÊôÇÈñìÈÉΩÈùúÊ≠¢‰∫Ü„ÄÇ",
                colors: ["#228B22", "#87CEEB", "#F0FFF0", "#708090"]
            }
        ];

        // ÈáùÂ∞ç‰∏çÂêåÊñπÂêë (Query) ÁöÑÁÆóÂëΩËß£Êûê (Oracle Text)
        // ÈÄôË£°ÂÅöÁ∞°ÂñÆÁöÑÈÇèËºØÊò†Â∞ÑÔºåËÆìÊØèÊ¨°ÁµêÊûúÁúãËµ∑‰æÜ‰∏çÂêå
        const oracleReadings = {
            'CAREER': [
                "Âú®‰∫ãÊ•≠‰∏äÔºå‰Ω†ÈúÄË¶ÅÂª∫Á´ãÊõ¥ÈÆÆÊòéÁöÑÂÄã‰∫∫ÈÇäÁïå„ÄÇÈÄôÂºµÁâåÈ°ØÁ§∫ÔºåÂ∞àÊ•≠ÂΩ¢Ë±°ÁöÑÂª∫Á´ãÂú®Êñº„ÄåÊ∏õÊ≥ï„Äç„ÄÇ",
                "ËÅ∑Â†¥‰∏äÔºå‰Ω†ÁöÑÊ∞£Â†¥ÂãùÈÅéË®ÄË™û„ÄÇÈÄèÈÅéË¶ñË¶∫Âª∫Á´ãÊ¨äÂ®ÅÊÑüÔºåÂ∞áÊòØ‰Ω†ËøëÊúüÁ™ÅÁ†¥Áì∂È†∏ÁöÑÈóúÈçµ„ÄÇ",
                "ÊòØÊôÇÂÄôÂ±ïÁèæ‰Ω†ÁöÑÈáéÂøÉ‰∫Ü„ÄÇ‰∏çË¶ÅÈö±ËóèÈãíËäíÔºåÈÄôÂºµÁâåÊöóÁ§∫‰Ω†ÈúÄË¶ÅÊõ¥È´òË™ø„ÄÅÊõ¥ÂÖ∑‰æµÁï•ÊÄßÁöÑË¶ñË¶∫Á≠ñÁï•„ÄÇ"
            ],
            'LOVE': [
                "ÊÑüÊÉÖ‰∏≠ÔºåÁ•ûÁßòÊÑüÊòØ‰Ω†ÊúÄÂº∑ÁöÑÊ≠¶Âô®„ÄÇ‰∏çË¶Å‰∏ÄÊ¨°Â±ïÁèæÂÖ®ÈÉ®ÔºåÁïô‰∏ÄÈªûÊÉ≥ÂÉèÁ©∫ÈñìÔºåÊúÉËÆì‰∫∫Êõ¥ÊÉ≥Êé¢Á¥¢‰Ω†„ÄÇ",
                "ÈÄôÂºµÁâåË±°Âæµ„ÄåËá™‰ø°„Äç„ÄÇÁï∂‰Ω†ÊÑõ‰∏äÈè°Â≠êË£°ÁöÑËá™Â∑±ÊôÇÔºåÂ∞çÁöÑ‰∫∫Ëá™ÁÑ∂ÊúÉË¢´‰Ω†ÁôºÂÖâÁöÑÈ†ªÁéáÂê∏Âºï„ÄÇ",
                "Âú®Èóú‰øÇË£°Ë©¶ËëóÂ±ïÁèæÈÄôÂºµÁâåÁöÑÁâπË≥™ÔºöÊ∫´ÊüîËÄåÂ†ÖÂÆö„ÄÇË¶ñË¶∫‰∏äÂÇ≥ÈÅûÂá∫ÁöÑÊ∞õÂúçÔºåÊúÉÂπ´‰Ω†ÈÅéÊøæÊéâ‰∏çÈÅ©ÂêàÁöÑ‰∫∫„ÄÇ"
            ],
            'SOCIAL': [
                "Âú®Áæ§È´î‰∏≠Ôºå‰Ω†‰∏çÈúÄË¶ÅÂàªÊÑèÂêàÁæ§„ÄÇÈÄôÂºµÁâåÂª∫Ë≠∞‰Ω†ÊàêÁÇ∫ÈÇ£ÂÄã„Äå‰∏ç‰∏ÄÊ®£„ÄçÁöÑ‰∫∫ÔºåÁç®ÁâπÊÄßÊúÉËÆì‰Ω†ÊàêÁÇ∫ÁÑ¶Èªû„ÄÇ",
                "Á§æ‰∫§Â†¥ÂêàÁöÑÈ≠ÖÂäõ‰æÜËá™ÊñºÊîæÈ¨Ü„ÄÇÈÄôÂºµÁâåÈ°ØÁ§∫ÔºåÁï∂‰Ω†Â±ïÁèæÁúüÂØ¶ÁöÑËá™ÊàëÔºàÂç≥‰ΩøÊòØ‰∏çÂÆåÁæéÁöÑ‰∏ÄÈù¢ÔºâÊôÇÔºåÊúÄËø∑‰∫∫„ÄÇ",
                "ÈÄèÈÅéË¶ñË¶∫Ë™ûË®ÄÂëäË®¥‰∏ñÁïå‰Ω†ÊòØË™∞„ÄÇ‰∏ÄÂÄãÂº∑ÁÉàÁöÑÂÄã‰∫∫È¢®Ê†ºÊ®ôÁ±§ÔºåÊúÉËÆì‰∫∫Âú®‰∫∫Áæ§‰∏≠‰∏ÄÁúºË®ò‰Ωè‰Ω†„ÄÇ"
            ],
            'WEALTH': [
                "Ë≤°ÂØåÂñúÊ≠°ÊµÅÂêëÊúâË≥™ÊÑüÁöÑÂÆπÂô®„ÄÇÊèêÂçá‰Ω†ÁöÑÂ§ñÂú®ÂΩ¢Ë±°Ë≥™ÊÑüÔºåÂØ¶Èöõ‰∏äÊòØÂú®ÂêëÂÆáÂÆôÂÆ£Âëä‰Ω†ÂÄºÂæóÊõ¥Â•ΩÁöÑË±êÁõõ„ÄÇ",
                "ÈÄôÂºµÁâåÂ∏∂ÊúâÁ≤æÊ∫ñÁöÑÊ±∫Á≠ñËÉΩÈáè„ÄÇÂú®Ë¶ñË¶∫‰∏äÂ±ïÁèæ‰øêËêΩËàáÊûúÊñ∑ÔºåÊúâÂä©ÊñºÂê∏ÂºïÈ´òÂÉπÂÄºÁöÑÂêà‰ΩúÊ©üÊúÉ„ÄÇ",
                "ÈáëÈå¢ËÉΩÈáèÊ≠£Âú®Èù†Ëøë„ÄÇË©¶ËëóÂú®Á©øÊê≠ÊàñË¶ñË¶∫‰∏≠Âä†ÂÖ•ÈÄôÂºµÁâåÁöÑÂπ∏ÈÅãËâ≤Ôºå‰ΩúÁÇ∫Êé•Êî∂Ë≤°ÂØåÁöÑË®äËôü„ÄÇ"
            ],
            'GROWTH': [
                "‰Ω†Ê≠£Âú®Á∂ìÊ≠∑‰∏ÄÂ†¥ËõªËÆä„ÄÇËàäÁöÑÊÆºÂ∑≤Á∂ìÂ§™Â∞è‰∫ÜÔºåÈÄôÂºµÁâåÈºìÂãµ‰Ω†ÈÄèÈÅéÂÖ®Êñ∞ÁöÑÂΩ¢Ë±°Ôºå‰æÜËøéÊé•ÂçáÁ¥öÂæåÁöÑËá™Â∑±„ÄÇ",
                "ÂÖßÂú®ÁöÑËΩâËÆäÈúÄË¶ÅÂ§ñÂú®ÁöÑÂÑÄÂºè‰æÜÁ¢∫Ë™ç„ÄÇÈÄôÊ¨°ÁöÑÊãçÊîù‰∏çÂè™ÊòØÊãçÁÖßÔºåËÄåÊòØ‰∏ÄÂ†¥ÂÆ£Âëä„ÄåÊàëÂ∑≤Á∂ì‰∏çÂêå‰∫Ü„ÄçÁöÑÂÑÄÂºè„ÄÇ",
                "ÈÄôÂºµÁâåË±°ÂæµÂπ≥Ë°°„ÄÇÂú®ËøΩÊ±ÇÊàêÈï∑ÁöÑË∑Ø‰∏äÔºåÂà•Âøò‰∫ÜÂÅú‰∏ã‰æÜÊ¨£Ë≥ûËá™Â∑±ÁöÑÁæé„ÄÇÁúãË¶ãËá™Â∑±ÁöÑÂÖâÔºåÊòØÊàêÈï∑ÁöÑÁ¨¨‰∏ÄÊ≠•„ÄÇ"
            ]
        };

        // --- ÂàùÂßãÂåñÈ†ÅÈù¢ ---
        document.addEventListener('DOMContentLoaded', () => {
            const grid = document.getElementById('cardGrid');
            // ÁîüÊàê9ÂºµÂç°Áâá
            for(let i=0; i<9; i++) {
                grid.innerHTML += `
                    <div class="card-container" onclick="revealCard(${i})">
                        <div class="card-inner">
                            <div class="card-front"><span class="text-[#BF953F] text-2xl font-serif">${romanize(i+1)}</span></div>
                            <div class="card-back"></div>
                        </div>
                    </div>
                `;
            }
        });

        function romanize(num) {
            const lookup = {X:10,IX:9,V:5,IV:4,I:1};
            let roman = '',i;
            for (i in lookup) {
                while (num >= lookup[i]) { roman += i; num -= lookup[i]; }
            }
            return roman;
        }

        let userData = {};

        function goToDeck() {
            const name = document.getElementById('userName').value;
            const date = document.getElementById('userDate').value;
            const gender = document.getElementById('userGender').value;
            const query = document.getElementById('userQuery').value;
            
            if(!name || !date) {
                alert("Ë´ãËº∏ÂÖ•ÂÆåÊï¥Ë≥áÊñô‰ª•ÂïüÂãïÂÑÄÂºè„ÄÇ");
                return;
            }

            userData = { name, date, gender, query };

            document.getElementById('step1').classList.add('hidden');
            document.getElementById('step2').classList.remove('hidden');
        }

        function revealCard(index) {
            // Èö®Ê©üÊäΩÈÅ∏ÁµêÊûú (Ê†∏ÂøÉÈÇèËºØ)
            const randomArchetype = archetypes[Math.floor(Math.random() * archetypes.length)];
            
            // Èö®Ê©üÈÅ∏Âèñ‰∏ÄÂè•Â∞çÊáâÊñπÂêëÁöÑÁ•ûË´≠
            const readings = oracleReadings[userData.query];
            const randomReading = readings[Math.floor(Math.random() * readings.length)];

            // ÁøªÁâåÂãïÁï´
            const cards = document.querySelectorAll('.card-container');
            cards[index].classList.add('flipped');

            setTimeout(() => {
                document.getElementById('step2').classList.add('hidden');
                showResult(randomArchetype, randomReading);
            }, 800);
        }

        function showResult(data, reading) {
            // Â°´ÂÖ•ÁµêÊûú
            document.getElementById('cardTitle').innerText = data.title;
            document.getElementById('cardKeywords').innerText = data.keywords;
            document.getElementById('oracleText').innerText = reading;
            document.getElementById('cardAdvice').innerText = data.visual;

            // Ëâ≤Á•®
            const colorBox = document.getElementById('colorContainer');
            colorBox.innerHTML = '';
            data.colors.forEach(c => {
                const div = document.createElement('div');
                div.className = 'h-full w-full rounded cursor-pointer border border-white/20';
                div.style.backgroundColor = c;
                div.onclick = () => copyColor(c);
                colorBox.appendChild(div);
            });

            // Ê∫ñÂÇôÁ•®Âà∏Ë≥áÊñô
            document.getElementById('ticketName').innerText = userData.name;
            document.getElementById('ticketDate').innerText = new Date().toISOString().split('T')[0].replace(/-/g, '.');
            document.getElementById('ticketArchetype').innerText = data.title.split(' (')[0];
            document.getElementById('ticketQuery').innerText = userData.query;
            document.getElementById('ticketColor').style.backgroundColor = data.colors[3]; // ‰ΩøÁî®ÊúÄÂæå‰∏ÄÂÄãÂº∑Ë™øËâ≤

            document.getElementById('step3').classList.remove('hidden');
        }

        function copyColor(c) {
            navigator.clipboard.writeText(c);
            const toast = document.getElementById('toast');
            toast.classList.add('show');
            setTimeout(() => toast.classList.remove('show'), 2000);
        }

        function resetDraw() {
            document.getElementById('step3').classList.add('hidden');
            document.getElementById('step4').classList.add('hidden');
            const cards = document.querySelectorAll('.card-container');
            cards.forEach(card => card.classList.remove('flipped'));
            document.getElementById('step2').classList.remove('hidden');
        }

        function generateTicket() {
            document.getElementById('step3').classList.add('hidden');
            document.getElementById('step4').classList.remove('hidden');
        }

        function downloadTicket() {
            const ticketNode = document.getElementById('ticketArea');
            
            html2canvas(ticketNode, {
                backgroundColor: "#111111", // Á¢∫‰øùËÉåÊôØ‰∏çÊòØÈÄèÊòé
                scale: 2 // ÊèêÈ´òËß£ÊûêÂ∫¶
            }).then(canvas => {
                const link = document.createElement('a');
                link.download = `EDEN_PASS_${userData.name}.png`;
                link.href = canvas.toDataURL();
                link.click();
            });
        }
    </script>
</body>
</html>
